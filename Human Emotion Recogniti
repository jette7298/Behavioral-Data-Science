{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/xinyunchoong/group13-jette-jakub-xin-yun?scriptVersionId=276708943\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown"},{"cell_type":"markdown","id":"bed1a83d","metadata":{"papermill":{"duration":0.010263,"end_time":"2025-11-12T14:27:43.860027","exception":false,"start_time":"2025-11-12T14:27:43.849764","status":"completed"},"tags":[]},"source":["<div style=\"background-color:#E85E44; \n","            color:white; \n","            padding:15px; \n","            border-radius:10px; \n","            text-align:center; \n","            font-size:30px; \n","            font-weight:bold;\">\n","   Human Faces - BDA Competition 2025 <br>\n","    <span style=\"font-size:20px; font-weight:normal;\">\n","        Round 2: Jette, Jakub & Xin Yun\n","    </span>\n","</div>\n","\n","# Content of this Notebook\n","[1️⃣ Introduction](#introduction)  \n","[2️⃣ Importing Data](#importing-data)  \n","[3️⃣ Feature Engineering](#feature-engineering)   \n","[4️⃣ Models](#fitting-a-model)   \n","[5️⃣ Submission](#submission)   \n","[6️⃣ References](#references)    \n","\n","# 1. Introduction\n","\n","The data was sourced from the CK+ database and includes 101 participants expressing four emotions, namely anger, disgust, happiness and sadness. Participants ranged in age from 18 to 50 years, with the majority of them being women and Euro-American. Emotion labels were verified by emotion researchers based on facial action units (Lucey, et al., 2010). The dataset contained greyscale images stored in PNG format. \n","\n","Candidate maching learning methods for the task of facial recognition classification include decision trees, k-nearest neighbours (KNN), support vector machines (SVMs), and random forests. Each of these methods provide different benefits and limitations, ranging from computation issues to issues such as overfitting. \n","\n","The Bayes error bound represents the theoretical minimum accuracy the classifier can achieve. To obtain the Bayes error bound, we refer to the findings by Mollahosseini et al. (2017). In his study, he reported agreement rates of 62.3% for anger, 67.6% for disgust, 79.6% for happiness, and 69.7% for sadness. However, some groups of last years competition managed to obtain an accuracy of nearly 86%. Therefore, we expect Bayes' error bound to lie within that range.\n","</div> These values will be taken into consideration and used as reference points when evaluating the performance of our model. "]},{"cell_type":"code","execution_count":1,"id":"988da6a1","metadata":{"_cell_guid":"89478066-a66c-407d-8dc3-4acce52b1c14","_execution_state":"idle","_uuid":"7ebd819b-71f6-4a60-9234-c89afd626cc3","collapsed":false,"execution":{"iopub.execute_input":"2025-11-12T14:27:43.883925Z","iopub.status.busy":"2025-11-12T14:27:43.881723Z","iopub.status.idle":"2025-11-12T14:27:48.030984Z","shell.execute_reply":"2025-11-12T14:27:48.029035Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":4.16492,"end_time":"2025-11-12T14:27:48.034519","exception":false,"start_time":"2025-11-12T14:27:43.869599","status":"completed"},"tags":[]},"outputs":[],"source":["## Importing packages\n","\n","suppressPackageStartupMessages({\n","library(tidyverse) # Metapackage with lots of helpful functions\n","library(png) # Package that can be used to read png image files in a simple format\n","library(dplyr)\n","library(e1071) # Package for entropy calculation\n","library(ranger) # Package to fit random forests\n","library(caret)\n","library(keras) # deep features\n","})\n","\n","# Limiting the number of data frame rows displayed\n","options(repr.matrix.max.rows=8)"]},{"cell_type":"markdown","id":"74dce733","metadata":{"_cell_guid":"91f6dbf4-b1bf-4db0-a6aa-082cead2abca","_uuid":"d17a7ede-bcd6-4470-bfce-24f6175abd5b","papermill":{"duration":0.009867,"end_time":"2025-11-12T14:27:48.053764","exception":false,"start_time":"2025-11-12T14:27:48.043897","status":"completed"},"tags":[]},"source":["# 2. Importing Data\n","\n","Image data often requires more storage than the available RAM, making it impossible to work with all the data in memory. Resizing images can help, but can result in loss of information. In our case, however, the images are able to be stored in RAM, allowing us to read them directly during model fitting. \n","\n","The dataset consists of 2538 grayscale images, each sized 48 x 48 pixels. To read in images pixelwise, each image is stored as a long vector of pixel intensities arranged row by row. Additionally, a separate vector stores the corresponding emotion labels for each image."]},{"cell_type":"code","execution_count":2,"id":"b1c6f632","metadata":{"_cell_guid":"9b1ca7dd-f435-4068-8bf0-057ac12630cf","_uuid":"6405d624-ef79-4b48-b0bb-c9d15a350530","collapsed":false,"execution":{"iopub.execute_input":"2025-11-12T14:27:48.108486Z","iopub.status.busy":"2025-11-12T14:27:48.075826Z","iopub.status.idle":"2025-11-12T14:27:48.897921Z","shell.execute_reply":"2025-11-12T14:27:48.896057Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.837732,"end_time":"2025-11-12T14:27:48.901669","exception":false,"start_time":"2025-11-12T14:27:48.063937","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'../input/bda-2025-human-faces'</li><li>'../input/bda-2025-human-faces/ckplus'</li><li>'../input/bda-2025-human-faces/ckplus/test'</li><li>'../input/bda-2025-human-faces/ckplus/train'</li><li>'../input/bda-2025-human-faces/ckplus/train/anger'</li><li>'../input/bda-2025-human-faces/ckplus/train/disgust'</li><li>'../input/bda-2025-human-faces/ckplus/train/happy'</li><li>'../input/bda-2025-human-faces/ckplus/train/sadness'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item '../input/bda-2025-human-faces'\n","\\item '../input/bda-2025-human-faces/ckplus'\n","\\item '../input/bda-2025-human-faces/ckplus/test'\n","\\item '../input/bda-2025-human-faces/ckplus/train'\n","\\item '../input/bda-2025-human-faces/ckplus/train/anger'\n","\\item '../input/bda-2025-human-faces/ckplus/train/disgust'\n","\\item '../input/bda-2025-human-faces/ckplus/train/happy'\n","\\item '../input/bda-2025-human-faces/ckplus/train/sadness'\n","\\end{enumerate*}\n"],"text/markdown":["1. '../input/bda-2025-human-faces'\n","2. '../input/bda-2025-human-faces/ckplus'\n","3. '../input/bda-2025-human-faces/ckplus/test'\n","4. '../input/bda-2025-human-faces/ckplus/train'\n","5. '../input/bda-2025-human-faces/ckplus/train/anger'\n","6. '../input/bda-2025-human-faces/ckplus/train/disgust'\n","7. '../input/bda-2025-human-faces/ckplus/train/happy'\n","8. '../input/bda-2025-human-faces/ckplus/train/sadness'\n","\n","\n"],"text/plain":["[1] \"../input/bda-2025-human-faces\"                     \n","[2] \"../input/bda-2025-human-faces/ckplus\"              \n","[3] \"../input/bda-2025-human-faces/ckplus/test\"         \n","[4] \"../input/bda-2025-human-faces/ckplus/train\"        \n","[5] \"../input/bda-2025-human-faces/ckplus/train/anger\"  \n","[6] \"../input/bda-2025-human-faces/ckplus/train/disgust\"\n","[7] \"../input/bda-2025-human-faces/ckplus/train/happy\"  \n","[8] \"../input/bda-2025-human-faces/ckplus/train/sadness\""]},"metadata":{},"output_type":"display_data"}],"source":["# Show the availabe directories\n","dirs = dir(\"../input\", pattern=\"[^g]$\", recursive=TRUE, include.dirs = TRUE, full.names = TRUE)\n","dirs\n","\n","anger   = dir(grep(\"anger\",   dirs, value = TRUE), pattern = \"png$\", full.names = TRUE)\n","disgust = dir(grep(\"disgust\", dirs, value = TRUE), pattern = \"png$\", full.names = TRUE)\n","happy   = dir(grep(\"happy\",   dirs, value = TRUE), pattern = \"png$\", full.names = TRUE)\n","sad     = dir(grep(\"sad\",     dirs, value = TRUE), pattern = \"png$\", full.names = TRUE)\n","test_im = dir(grep(\"test\",    dirs, value = TRUE), pattern = \"png$\", full.names = TRUE)\n","\n","\n","\n","\n","# TEMP: limit per class\n","#anger   <- head(anger,   min(50, length(anger)))\n","#disgust <- head(disgust, min(50, length(disgust)))\n","#happy   <- head(happy,   min(50, length(happy)))\n","#sad     <- head(sad,     min(50, length(sad)))\n"]},{"cell_type":"code","execution_count":3,"id":"217175a7","metadata":{"_cell_guid":"637fcd8c-e612-4020-86f2-88fbd688687f","_uuid":"ad9fee27-2284-453a-a7e5-afa11945a9db","collapsed":false,"execution":{"iopub.execute_input":"2025-11-12T14:27:48.926728Z","iopub.status.busy":"2025-11-12T14:27:48.925028Z","iopub.status.idle":"2025-11-12T14:28:01.925705Z","shell.execute_reply":"2025-11-12T14:28:01.923522Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":13.015971,"end_time":"2025-11-12T14:28:01.928613","exception":false,"start_time":"2025-11-12T14:27:48.912642","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["                                    p20        p21        p22        p23\n","anger/S010_004_00000018a.png 0.58039216 0.60784314 0.70196078 0.85882353\n","anger/S010_004_00000018b.png 0.02745098 0.02745098 0.04313725 0.07450980\n","anger/S010_004_00000018c.png 0.03529412 0.03137255 0.02745098 0.01960784\n","anger/S010_004_00000018d.png 0.03921569 0.03137255 0.03137255 0.02745098\n","anger/S010_004_00000018e.png 1.00000000 1.00000000 1.00000000 1.00000000\n","anger/S010_004_00000018f.png 1.00000000 1.00000000 1.00000000 1.00000000\n"]},{"data":{"text/plain":["y\n","  anger disgust   happy     sad \n","    570     744     870     354 "]},"metadata":{},"output_type":"display_data"},{"name":"stdout","output_type":"stream","text":["                              p20        p21        p22        p23\n","S010_004_00000017a.png 0.77647059 0.81960784 0.89803922 0.98039216\n","S010_004_00000017b.png 0.46666667 0.52549020 0.63529412 0.74901961\n","S010_004_00000017c.png 0.25490196 0.34509804 0.49803922 0.67450980\n","S010_004_00000017d.png 0.04313725 0.03529412 0.03529412 0.02745098\n","S010_004_00000017e.png 0.03921569 0.03137255 0.03137255 0.02745098\n","S010_004_00000017f.png 0.07058824 0.10588235 0.14509804 0.24705882\n"]}],"source":["# TEMPORARY: restrict number of images per class for faster testing\n","#anger   <- head(anger,   50)\n","#disgust <- head(disgust, 50)\n","#happy   <- head(happy,   50)\n","#sad     <- head(sad,     50)\n","\n","\n","# Combine all filenames into a single vector\n","train_image_files = c(anger, happy, sad, disgust)\n","\n","# Read in the images as pixel values\n","X = sapply(train_image_files, function(nm) c(readPNG(nm)[,,1])) %>% t()\n","\n","# Create labels\n","y = c(rep(\"anger\",   length(anger)),\n","      rep(\"happy\",   length(happy)),\n","      rep(\"sad\",     length(sad)),\n","      rep(\"disgust\", length(disgust)))\n","\n","\n","# Process test images in the same way as the training images\n","X_test = sapply(test_im, function(nm) c(readPNG(nm)[,,1])) %>% t()\n","\n","# Change row and column names of X to something more manageable (caret::train requires column names)\n","rownames(X)      = gsub(\".+train/\", \"\", rownames(X))\n","rownames(X_test) = gsub(\".+test/\",  \"\", rownames(X_test))\n","\n","# Assign column names for X and X_test\n","colnames(X)      = paste(\"p\", 1:ncol(X), sep = \"\")\n","colnames(X_test) = paste(\"p\", 1:ncol(X_test), sep = \"\")\n","\n","# Check the result (are X, X_test, and y what we expect?)\n","X[1:6, 20:23] %>% print()\n","table(y)\n","X_test[1:6, 20:23] %>% print()"]},{"cell_type":"markdown","id":"97d6552a","metadata":{"papermill":{"duration":0.009592,"end_time":"2025-11-12T14:28:01.94805","exception":false,"start_time":"2025-11-12T14:28:01.938458","status":"completed"},"tags":[]},"source":["# Image Display Helper Function"]},{"cell_type":"code","execution_count":4,"id":"a0aeb008","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:28:01.970842Z","iopub.status.busy":"2025-11-12T14:28:01.969227Z","iopub.status.idle":"2025-11-12T14:28:01.984791Z","shell.execute_reply":"2025-11-12T14:28:01.982945Z"},"papermill":{"duration":0.029888,"end_time":"2025-11-12T14:28:01.987408","exception":false,"start_time":"2025-11-12T14:28:01.95752","status":"completed"},"tags":[]},"outputs":[],"source":["## Define a utility function for displaying images\n","\n","show_img = function(x, col=gray(0:100/100), ..., nrow=sqrt(length(x)), ncol=nrow) \n","    image(matrix(x, nrow, ncol, byrow=T)[,ncol:1], col=col, ..., useRaster=TRUE)"]},{"cell_type":"markdown","id":"48895afe","metadata":{"papermill":{"duration":0.009601,"end_time":"2025-11-12T14:28:02.006587","exception":false,"start_time":"2025-11-12T14:28:01.996986","status":"completed"},"tags":[]},"source":["# 3. Feature engineering\n","\n","There are several approaches to feature extraction in facial recognition. These include raw pixel analyses, histogram-based features, and the bag-of-features model, which we will discuss in more detail below.\n","Each section is structured in a way that we first define so called \"helper functions\" that compute the repective features and then, secondly, these helper functions are applied to all the images in the data set."]},{"cell_type":"markdown","id":"2f55a845","metadata":{"papermill":{"duration":0.009537,"end_time":"2025-11-12T14:28:02.025577","exception":false,"start_time":"2025-11-12T14:28:02.01604","status":"completed"},"tags":[]},"source":["## 3.1 Raw Pixel Analysis\n","\n","We begin by computing features directly using the raw pixel values. In order to do this, each grayscale image of size 48 x 48 is flattened into a one-dimensional vector containing 2304 pixel intensity values ranging from 0 to 1. This preserves the original pixel information without any transformation. \n","\n","In addition to using all pixels from the full image, we can divide each image into smaller patches and extract pixel features from the patches itself. This allows the model to capture patterns within different patches, which can be useful in detecting subtle variations in facial expressions. "]},{"cell_type":"code","execution_count":5,"id":"878df93d","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:28:02.049713Z","iopub.status.busy":"2025-11-12T14:28:02.047982Z","iopub.status.idle":"2025-11-12T14:28:02.067938Z","shell.execute_reply":"2025-11-12T14:28:02.065562Z"},"papermill":{"duration":0.035432,"end_time":"2025-11-12T14:28:02.070968","exception":false,"start_time":"2025-11-12T14:28:02.035536","status":"completed"},"tags":[]},"outputs":[],"source":["# Turn vector into matrix\n","to_image <- function(X, dim_image = sqrt(length(X))) {\n","  matrix(as.numeric(X), nrow = dim_image, ncol = dim_image, byrow = TRUE)\n","}\n","\n","# Row/column means\n","calculate_image_means <- function(row, dim_image = sqrt(length(row))) {\n","  image <- to_image(row, dim_image)\n","  row_means <- rowMeans(image)\n","  col_means <- colMeans(image)\n","  name_r <- paste0(\"row_\", seq_along(row_means), \"_mean\")\n","  name_c <- paste0(\"col_\", seq_along(col_means), \"_mean\")\n","  as.data.frame(\n","    t(c(stats::setNames(row_means, name_r), stats::setNames(col_means, name_c)))\n","  )\n","}\n","\n","# Other stats\n","calculate_image_stats <- function(image_as_row, dim_image = sqrt(length(image_as_row))) {\n","  image_sum_stats <- image_as_row %>%\n","    unlist() %>%\n","    matrix(nrow = dim_image, ncol = dim_image) %>%\n","    as_tibble() %>%\n","    summarise(\n","      col_skew = e1071::skewness(colSums(.)),\n","      row_skew = e1071::skewness(rowSums(.)),\n","      col_kurt = e1071::kurtosis(colSums(.)),\n","      row_kurt = e1071::kurtosis(rowSums(.)),\n","      col_med = median(colSums(.), na.rm = TRUE),\n","      row_med = median(rowSums(.), na.rm = TRUE),\n","      col_sd = sd(colSums(.)),\n","      row_sd = sd(rowSums(.)),\n","      col_entr = entropy::entropy(colSums(.)),\n","      row_entr = entropy::entropy(rowSums(.)),\n","      col_pow = mean(colSums(.)^2),\n","      row_pow = mean(rowSums(.)^2)\n","    ) %>%\n","    unlist()\n","  image_sum_stats\n","}\n"]},{"cell_type":"markdown","id":"30e00763","metadata":{"papermill":{"duration":0.009434,"end_time":"2025-11-12T14:28:02.090102","exception":false,"start_time":"2025-11-12T14:28:02.080668","status":"completed"},"tags":[]},"source":["**Let's now extract the features.**"]},{"cell_type":"code","execution_count":6,"id":"21b34612","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:28:02.113811Z","iopub.status.busy":"2025-11-12T14:28:02.111991Z","iopub.status.idle":"2025-11-12T14:28:37.823333Z","shell.execute_reply":"2025-11-12T14:28:37.820142Z"},"papermill":{"duration":35.738453,"end_time":"2025-11-12T14:28:37.838013","exception":false,"start_time":"2025-11-12T14:28:02.09956","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["'96 features based on the raw-pixel row/column mean'"],"text/latex":["'96 features based on the raw-pixel row/column mean'"],"text/markdown":["'96 features based on the raw-pixel row/column mean'"],"text/plain":["[1] \"96 features based on the raw-pixel row/column mean\""]},"metadata":{},"output_type":"display_data"},{"name":"stderr","output_type":"stream","text":["Warning message:\n","“\u001b[1m\u001b[22mThe `x` argument of `as_tibble.matrix()` must have unique column names if\n","`.name_repair` is omitted as of tibble 2.0.0.\n","\u001b[36mℹ\u001b[39m Using compatibility `.name_repair`.”\n"]},{"data":{"text/html":["'12 features based on the raw-pixel sum stats'"],"text/latex":["'12 features based on the raw-pixel sum stats'"],"text/markdown":["'12 features based on the raw-pixel sum stats'"],"text/plain":["[1] \"12 features based on the raw-pixel sum stats\""]},"metadata":{},"output_type":"display_data"}],"source":["## Applying the function\n","# Row/column means per image\n","features_col_row_means <- X %>%\n","  asplit(1) %>%                         # list of row-vectors\n","  map_dfr(~ calculate_image_means(.x))  # bind rows\n","paste(ncol(features_col_row_means), \"features based on the raw-pixel row/column mean\")\n","\n","# Sum-stats per image\n","features_image_sum_stats <- X %>%\n","  asplit(1) %>%\n","  map_dfr(~ calculate_image_stats(.x))\n","paste(ncol(features_image_sum_stats), \"features based on the raw-pixel sum stats\")"]},{"cell_type":"markdown","id":"508c99c1","metadata":{"papermill":{"duration":0.01003,"end_time":"2025-11-12T14:28:37.857919","exception":false,"start_time":"2025-11-12T14:28:37.847889","status":"completed"},"tags":[]},"source":["All features were computed on the rows and columns because faces are directional: horizontal cues (eyes, mouth) and vertical cues (nose, symmetry). Using both rows and columns allows us to preserve orientation information a single direction would miss. \n","\n","1. Mean: Average intensity per row/column\n","2. Median: Robust central tendency of line intensities\n","3. SD: Variation in line intensities\n","4. Skewness: Asymmetry of intensity distribution across rows/columns\n","5. Kurtosis: Tail/Heaviness/Peakedness of the distribution\n","6. Entropy: Uncertainty/disorder of how intensity is distributed across lines (ideally computed on normalized sums)\n","7. Power: Overall signal magnitude along rows/columns"]},{"cell_type":"markdown","id":"bfc4aaf5","metadata":{"papermill":{"duration":0.009851,"end_time":"2025-11-12T14:28:37.877905","exception":false,"start_time":"2025-11-12T14:28:37.868054","status":"completed"},"tags":[]},"source":["## 3.2 Frey-Slate Histogram features \n","\n","Histogram features are effective for detecting edges, which is when we see a rapid change in pixel intensity. To identify these edges, we can compute the difference in intensity between two consecutive pixels. If the difference exceeds a predefined threshold, it indicates an abrupt intensity change, and we can determine the presence of an edge.\n","\n","Edge detection can be performed in any direction, though it is sufficient to do in only two directions: north-south, or east-west. These correspond to vertical and horizontal edges respectively. By computing the difference in the 3 directions, we can identify major structual features in the image and filter out pixels that are part of a diagonal edge. "]},{"cell_type":"code","execution_count":7,"id":"c623e397","metadata":{"_cell_guid":"caa331f1-fa1f-483c-ab97-a941bf714174","_uuid":"da7d5489-1b8b-4ed9-a812-b4ab58c30050","collapsed":false,"execution":{"iopub.execute_input":"2025-11-12T14:28:37.901622Z","iopub.status.busy":"2025-11-12T14:28:37.899902Z","iopub.status.idle":"2025-11-12T14:28:38.810683Z","shell.execute_reply":"2025-11-12T14:28:38.80878Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.925726,"end_time":"2025-11-12T14:28:38.813548","exception":false,"start_time":"2025-11-12T14:28:37.887822","status":"completed"},"tags":[]},"outputs":[],"source":["# Threshold for edge detection\n","threshold = 0.0625\n","\n","# Load FreySlateFeatures function \n","source(\"https://bit.ly/32um24j\")\n","\n","# Function to compute Frey-Slate features \n","Frey_slate_features = function(X, # Matrix\n","                             threshold = 0.0625 # Threshold for edge detection\n","                            ) {\n","    all_feat = list() # Empty list to store features \n","\n","    for (i in 1:nrow(X)) { # For loop to loop over all images\n","        im = matrix(X[i, ], 48, 48)\n","\n","        # Compute edges by differencing neighboring pixels\n","        h_edge  = im[-1, ] - im[-48, ]        # horizontal\n","        v_edge  = im[, -1] - im[, -48]        # vertical\n","        d_edge  = h_edge[, -1] - h_edge[, -48] # diagonal\n","\n","        # Compute features using FreySlateFeatures which extracts histogram-style features from each edge map\n","        horizontal = t(FreySlateFeatures(h_edge < threshold)) # If true, computes histogram featues using FreySlateFeatures and results are transposed into a row vector\n","        colnames(horizontal) = paste0(colnames(horizontal), \"_horizontal\")\n","\n","        vertical = t(FreySlateFeatures(v_edge < threshold))\n","        colnames(vertical) = paste0(colnames(vertical), \"_vertical\")\n","\n","        diagonal = t(FreySlateFeatures(d_edge < threshold))\n","        colnames(diagonal) = paste0(colnames(diagonal), \"_diagonal\")\n","\n","        # Combine all features \n","        features = cbind(horizontal, vertical, diagonal) # Combine features into a single vector\n","\n","        # SToring all results in feat_matrix\n","        all_feat[[i]] = features # Store all features\n","    }\n","\n","    # Start LLM\n","\n","    feat_matrix = do.call(rbind, all_feat) # Stacks all row vectors into a matrix\n","\n","    # End LLM\n","    \n","    colnames(feat_matrix) = colnames(all_feat[[1]])\n","    return(feat_matrix) # Returns final feature matrix \n","}"]},{"cell_type":"markdown","id":"3a2b7506","metadata":{"papermill":{"duration":0.010261,"end_time":"2025-11-12T14:28:38.833956","exception":false,"start_time":"2025-11-12T14:28:38.823695","status":"completed"},"tags":[]},"source":["**Let's now apply the function.**"]},{"cell_type":"code","execution_count":8,"id":"14215b51","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:28:38.85796Z","iopub.status.busy":"2025-11-12T14:28:38.856315Z","iopub.status.idle":"2025-11-12T14:28:48.333011Z","shell.execute_reply":"2025-11-12T14:28:48.330959Z"},"papermill":{"duration":9.491564,"end_time":"2025-11-12T14:28:48.335625","exception":false,"start_time":"2025-11-12T14:28:38.844061","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":[" num [1:2538, 1:48] 7.98 7.98 7.98 7.98 7.98 ...\n"," - attr(*, \"dimnames\")=List of 2\n","  ..$ : NULL\n","  ..$ : chr [1:48] \"x.box_horizontal\" \"y.box_horizontal\" \"width_horizontal\" \"high_horizontal\" ...\n"]},{"name":"stdout","output_type":"stream","text":[" num [1:1080, 1:48] 7.98 7.98 7.98 7.98 7.98 ...\n"," - attr(*, \"dimnames\")=List of 2\n","  ..$ : NULL\n","  ..$ : chr [1:48] \"x.box_horizontal\" \"y.box_horizontal\" \"width_horizontal\" \"high_horizontal\" ...\n"]}],"source":["# Frey Slate features on training data\n","\n","freyslate_feat = Frey_slate_features(X)\n","glimpse(freyslate_feat)\n","\n","# Frey slate features on test data \n","\n","freyslate_feat_test = Frey_slate_features(X_test)\n","glimpse(freyslate_feat_test)"]},{"cell_type":"markdown","id":"26b573c6","metadata":{"papermill":{"duration":0.009978,"end_time":"2025-11-12T14:28:48.355894","exception":false,"start_time":"2025-11-12T14:28:48.345916","status":"completed"},"tags":[]},"source":["## 3.3 Bag of Features (Visual Words) Approach\n","\n","The **bag of features** approach represents images using a “dictionary” of local pattern patches. Each image is described by how frequently these learned patches occur, similar to how the bag-of-words model represents text. Specifically, we measure the degree of similarity between each patch and the dictionary patterns, and either apply a similarity threshold or aggregate similarity scores across the image. The resulting histogram of pattern counts (or activations) forms the image’s feature representation.\n","\n","In this study, we used a **pretrained Convolutional Neural Network (CNN)** — **DenseNet201**, trained on the ImageNet dataset — to serve as the feature extractor (i.e., the dictionary of learned patterns). The extraction process is implemented in a custom function that performs the following steps:\n","\n","1. **Model initialization:** Load the DenseNet201 CNN with pretrained ImageNet weights.  \n","2. **Image reshaping:** Reshape each flattened image from the pixel matrix into a 4D array with dimensions `(n_images, height, width, channels)`.  \n","3. **Feature extraction:** Preprocess the images and extract the deep feature activations from DenseNet.  \n","4. **Feature pruning:** Remove features with near-zero variance and features that are highly correlated (correlation > 0.95).  \n","5. **Output:** Return a filtered deep feature matrix, where each row corresponds to one image and each column represents a retained deep feature.  \n","\n","This results in a compact yet informative feature representation that captures high-level visual patterns while reducing redundancy.\n"]},{"cell_type":"code","execution_count":9,"id":"93d4017f","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:28:48.380518Z","iopub.status.busy":"2025-11-12T14:28:48.378869Z","iopub.status.idle":"2025-11-12T14:28:48.394624Z","shell.execute_reply":"2025-11-12T14:28:48.39272Z"},"papermill":{"duration":0.031779,"end_time":"2025-11-12T14:28:48.39772","exception":false,"start_time":"2025-11-12T14:28:48.365941","status":"completed"},"tags":[]},"outputs":[],"source":["# Function made with help of LLM\n","\n","extract_deep_features <- function(X, \n","                                  input_size = c(48, 48, 3), \n","                                  corr_cutoff = 0.95, \n","                                  verbose = TRUE) {\n","  \n","  # 1. Initialize DenseNet model\n","  if (verbose) cat(\"Loading DenseNet201 model...\\n\")\n","  densenet <- application_densenet201(weights = 'imagenet',\n","                                      input_shape = input_size,\n","                                      include_top = FALSE,\n","                                      pooling = \"avg\")  # avg pooling -> flat feature vector\n","  \n","  # 2. Reshape: from flat grayscale (n x 2304) to (n, 48, 48, 3)\n","  if (verbose) cat(\"Reshaping input data...\\n\")\n","  n <- nrow(X)\n","  x <- array(t(X), dim = c(48, 48, n, 3))\n","  x <- aperm(x, c(3, 1, 2, 4))  # reorder to (n, 48, 48, 3)\n","  \n","  # 3. Preprocess and extract features\n","  if (verbose) cat(\"Preprocessing and extracting deep features...\\n\")\n","  x <- densenet_preprocess_input(x)\n","  deep_features <- predict(densenet, x)\n","  Z <- drop(deep_features)\n","  \n","  # 4. Assign column names\n","  colnames(Z) <- paste0(\"deep\", 1:ncol(Z))\n","  \n","  return(Z)\n","}"]},{"cell_type":"markdown","id":"c463d5e4","metadata":{"papermill":{"duration":0.010827,"end_time":"2025-11-12T14:28:48.419026","exception":false,"start_time":"2025-11-12T14:28:48.408199","status":"completed"},"tags":[]},"source":["### Extracting Train Deep Features"]},{"cell_type":"code","execution_count":10,"id":"d536229f","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:28:48.443419Z","iopub.status.busy":"2025-11-12T14:28:48.441716Z","iopub.status.idle":"2025-11-12T14:29:39.580052Z","shell.execute_reply":"2025-11-12T14:29:39.577728Z"},"papermill":{"duration":51.156747,"end_time":"2025-11-12T14:29:39.586114","exception":false,"start_time":"2025-11-12T14:28:48.429367","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["Loading DenseNet201 model...\n","Reshaping input data...\n","Preprocessing and extracting deep features...\n"]},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>2538</li><li>1920</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 2538\n","\\item 1920\n","\\end{enumerate*}\n"],"text/markdown":["1. 2538\n","2. 1920\n","\n","\n"],"text/plain":["[1] 2538 1920"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'deep1'</li><li>'deep2'</li><li>'deep3'</li><li>'deep4'</li><li>'deep5'</li><li>'deep6'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 'deep1'\n","\\item 'deep2'\n","\\item 'deep3'\n","\\item 'deep4'\n","\\item 'deep5'\n","\\item 'deep6'\n","\\end{enumerate*}\n"],"text/markdown":["1. 'deep1'\n","2. 'deep2'\n","3. 'deep3'\n","4. 'deep4'\n","5. 'deep5'\n","6. 'deep6'\n","\n","\n"],"text/plain":["[1] \"deep1\" \"deep2\" \"deep3\" \"deep4\" \"deep5\" \"deep6\""]},"metadata":{},"output_type":"display_data"}],"source":["# Suppose X is an (n × 2304) matrix of grayscale images flattened into rows\n","deep_features <- extract_deep_features(X, corr_cutoff = 0.95)\n","\n","# Check dimensions\n","dim(deep_features)\n","head(colnames(deep_features))"]},{"cell_type":"markdown","id":"6716d164","metadata":{"papermill":{"duration":0.013106,"end_time":"2025-11-12T14:29:39.618346","exception":false,"start_time":"2025-11-12T14:29:39.60524","status":"completed"},"tags":[]},"source":["## 3.4 Spectral Features\n"]},{"cell_type":"code","execution_count":11,"id":"7f486df9","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:29:39.644983Z","iopub.status.busy":"2025-11-12T14:29:39.64339Z","iopub.status.idle":"2025-11-12T14:29:39.658744Z","shell.execute_reply":"2025-11-12T14:29:39.656883Z"},"papermill":{"duration":0.031309,"end_time":"2025-11-12T14:29:39.661667","exception":false,"start_time":"2025-11-12T14:29:39.630358","status":"completed"},"tags":[]},"outputs":[],"source":["get_spectral_features <- function(X) {\n","  n_images <- nrow(X)\n","  features_list <- vector(\"list\", n_images)\n","  \n","  for (i in seq_len(n_images)) {\n","    img_mat <- matrix(X[i, ], nrow = 48, ncol = 48)\n","    \n","    fft_result <- fft(img_mat)\n","    power_spectrum <- Mod(fft_result)^2\n","    \n","    # Manual 2D fftshift (center low frequencies)\n","    shift_rows <- floor(nrow(power_spectrum) / 2)\n","    shift_cols <- floor(ncol(power_spectrum) / 2)\n","    power_spectrum <- power_spectrum[\n","      c((shift_rows+1):nrow(power_spectrum), 1:shift_rows),\n","      c((shift_cols+1):ncol(power_spectrum), 1:shift_cols)\n","    ]\n","    \n","    fx <- seq(-0.5, 0.5, length.out = 48)\n","    fy <- seq(-0.5, 0.5, length.out = 48)\n","    fx_grid <- matrix(rep(fx, each = 48), nrow = 48)\n","    fy_grid <- matrix(rep(fy, times = 48), nrow = 48)\n","    freq_radius <- sqrt(fx_grid^2 + fy_grid^2)\n","    \n","    P <- as.vector(power_spectrum)\n","    f <- as.vector(freq_radius)\n","    P_norm <- P / sum(P)\n","    \n","    spectral_centroid  <- sum(f * P_norm)\n","    spectral_spread    <- sqrt(sum((f - spectral_centroid)^2 * P_norm))\n","    spectral_skewness  <- sum(((f - spectral_centroid) / spectral_spread)^3 * P_norm)\n","    spectral_kurtosis  <- sum(((f - spectral_centroid) / spectral_spread)^4 * P_norm)\n","    spectral_entropy   <- -sum(P_norm * log(P_norm + 1e-12))\n","    dominant_frequency <- f[which.max(P)]\n","    total_power        <- sum(P)\n","    \n","    features_list[[i]] <- c(\n","      spectral_centroid,\n","      spectral_spread,\n","      spectral_skewness,\n","      spectral_kurtosis,\n","      spectral_entropy,\n","      dominant_frequency,\n","      total_power\n","    )\n","  }\n","  \n","  feature_matrix <- do.call(rbind, features_list)\n","  colnames(feature_matrix) <- c(\n","    \"spectral_centroid\",\n","    \"spectral_spread\",\n","    \"spectral_skewness\",\n","    \"spectral_kurtosis\",\n","    \"spectral_entropy\",\n","    \"dominant_frequency\",\n","    \"total_power\"\n","  )\n","  \n","  return(feature_matrix)\n","}\n"]},{"cell_type":"markdown","id":"4f57c5de","metadata":{"papermill":{"duration":0.010495,"end_time":"2025-11-12T14:29:39.68268","exception":false,"start_time":"2025-11-12T14:29:39.672185","status":"completed"},"tags":[]},"source":["### Extracting Spectral Features"]},{"cell_type":"code","execution_count":12,"id":"02d511f7","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:29:39.737367Z","iopub.status.busy":"2025-11-12T14:29:39.735768Z","iopub.status.idle":"2025-11-12T14:29:41.36189Z","shell.execute_reply":"2025-11-12T14:29:41.360005Z"},"papermill":{"duration":1.671639,"end_time":"2025-11-12T14:29:41.364745","exception":false,"start_time":"2025-11-12T14:29:39.693106","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A matrix: 6 × 7 of type dbl</caption>\n","<thead>\n","\t<tr><th scope=col>spectral_centroid</th><th scope=col>spectral_spread</th><th scope=col>spectral_skewness</th><th scope=col>spectral_kurtosis</th><th scope=col>spectral_entropy</th><th scope=col>dominant_frequency</th><th scope=col>total_power</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>0.03987189</td><td>0.05853984</td><td>4.161531</td><td>24.65908</td><td>2.307404</td><td>0.01504483</td><td> 855566.2</td></tr>\n","\t<tr><td>0.05022290</td><td>0.07513099</td><td>3.154479</td><td>14.30706</td><td>2.460591</td><td>0.01504483</td><td>1159014.8</td></tr>\n","\t<tr><td>0.04947601</td><td>0.07165529</td><td>3.197617</td><td>15.17287</td><td>2.374705</td><td>0.01504483</td><td>1304149.9</td></tr>\n","\t<tr><td>0.05148382</td><td>0.07619062</td><td>3.035214</td><td>13.40092</td><td>2.449889</td><td>0.01504483</td><td>1075618.1</td></tr>\n","\t<tr><td>0.05822440</td><td>0.08818660</td><td>2.701246</td><td>10.44907</td><td>2.576386</td><td>0.01504483</td><td>1107776.5</td></tr>\n","\t<tr><td>0.05094794</td><td>0.07327949</td><td>2.980534</td><td>13.47595</td><td>2.489124</td><td>0.01504483</td><td>1175793.7</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A matrix: 6 × 7 of type dbl\n","\\begin{tabular}{lllllll}\n"," spectral\\_centroid & spectral\\_spread & spectral\\_skewness & spectral\\_kurtosis & spectral\\_entropy & dominant\\_frequency & total\\_power\\\\\n","\\hline\n","\t 0.03987189 & 0.05853984 & 4.161531 & 24.65908 & 2.307404 & 0.01504483 &  855566.2\\\\\n","\t 0.05022290 & 0.07513099 & 3.154479 & 14.30706 & 2.460591 & 0.01504483 & 1159014.8\\\\\n","\t 0.04947601 & 0.07165529 & 3.197617 & 15.17287 & 2.374705 & 0.01504483 & 1304149.9\\\\\n","\t 0.05148382 & 0.07619062 & 3.035214 & 13.40092 & 2.449889 & 0.01504483 & 1075618.1\\\\\n","\t 0.05822440 & 0.08818660 & 2.701246 & 10.44907 & 2.576386 & 0.01504483 & 1107776.5\\\\\n","\t 0.05094794 & 0.07327949 & 2.980534 & 13.47595 & 2.489124 & 0.01504483 & 1175793.7\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A matrix: 6 × 7 of type dbl\n","\n","| spectral_centroid | spectral_spread | spectral_skewness | spectral_kurtosis | spectral_entropy | dominant_frequency | total_power |\n","|---|---|---|---|---|---|---|\n","| 0.03987189 | 0.05853984 | 4.161531 | 24.65908 | 2.307404 | 0.01504483 |  855566.2 |\n","| 0.05022290 | 0.07513099 | 3.154479 | 14.30706 | 2.460591 | 0.01504483 | 1159014.8 |\n","| 0.04947601 | 0.07165529 | 3.197617 | 15.17287 | 2.374705 | 0.01504483 | 1304149.9 |\n","| 0.05148382 | 0.07619062 | 3.035214 | 13.40092 | 2.449889 | 0.01504483 | 1075618.1 |\n","| 0.05822440 | 0.08818660 | 2.701246 | 10.44907 | 2.576386 | 0.01504483 | 1107776.5 |\n","| 0.05094794 | 0.07327949 | 2.980534 | 13.47595 | 2.489124 | 0.01504483 | 1175793.7 |\n","\n"],"text/plain":["     spectral_centroid spectral_spread spectral_skewness spectral_kurtosis\n","[1,] 0.03987189        0.05853984      4.161531          24.65908         \n","[2,] 0.05022290        0.07513099      3.154479          14.30706         \n","[3,] 0.04947601        0.07165529      3.197617          15.17287         \n","[4,] 0.05148382        0.07619062      3.035214          13.40092         \n","[5,] 0.05822440        0.08818660      2.701246          10.44907         \n","[6,] 0.05094794        0.07327949      2.980534          13.47595         \n","     spectral_entropy dominant_frequency total_power\n","[1,] 2.307404         0.01504483          855566.2  \n","[2,] 2.460591         0.01504483         1159014.8  \n","[3,] 2.374705         0.01504483         1304149.9  \n","[4,] 2.449889         0.01504483         1075618.1  \n","[5,] 2.576386         0.01504483         1107776.5  \n","[6,] 2.489124         0.01504483         1175793.7  "]},"metadata":{},"output_type":"display_data"}],"source":["# Extracting the spectral features from our training set\n","spectral_features <- get_spectral_features(X)\n","\n","# Inspection of resulting feature matrix\n","head(spectral_features)"]},{"cell_type":"markdown","id":"53cbdffd","metadata":{"papermill":{"duration":0.010832,"end_time":"2025-11-12T14:29:41.386427","exception":false,"start_time":"2025-11-12T14:29:41.375595","status":"completed"},"tags":[]},"source":["## 3.5 Histogram of Oriented Gradients (HOG) features¶\n","The compute_hog() function extracts Histogram of Oriented Gradients (HOG) features from an image to facilitate facial expression recognition. It analyzes local intensity changes (gradients) and summarizes the predominant edge directions within small image regions. These histograms are then normalized to reduce the impact of lighting or contrast differences, resulting in robust and consistent features for classification.\n","\n","Key Steps\n","\n","1. Rescaling: The grayscale image is rescaled from 0–1 to 0–255.\n","\n","2. Gradient Computation: Horizontal and vertical intensity changes are calculated to capture edge strength.\n","\n","3. Magnitude & Orientation: For each pixel, the gradient magnitude and angle (edge direction) are derived.\n","\n","4. Histogram Generation: The image is divided into cells, and a histogram of gradient directions is computed within each.\n","\n","5. Normalization: Histograms are normalized across neighboring cells to ensure invariance to illumination.\n","\n","6. Output: The normalized histograms are concatenated into a single HOG feature vector.\n","\n","\n","HOG effectively captures the edge and texture structure characteristics of facial expressions. It provides a compact yet informative representation that is relatively invariant to lighting, scale, & small geometric changes, making it highly suitable for distinguishing subtle face movements. *(We took some inspiration here from group 5 from the 2023 competition.)*"]},{"cell_type":"code","execution_count":13,"id":"766861aa","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:29:41.41294Z","iopub.status.busy":"2025-11-12T14:29:41.411187Z","iopub.status.idle":"2025-11-12T14:29:41.431915Z","shell.execute_reply":"2025-11-12T14:29:41.430031Z"},"papermill":{"duration":0.037002,"end_time":"2025-11-12T14:29:41.434917","exception":false,"start_time":"2025-11-12T14:29:41.397915","status":"completed"},"tags":[]},"outputs":[],"source":["compute_gradients <- function(image) {\n","  # Sobel operators for gradient computation\n","  gx <- matrix(c(-1, 0, 1, -2, 0, 2, -1, 0, 1), nrow = 3, byrow = TRUE)\n","  gy <- t(gx)\n","  \n","  # Initialize matrices for gradients\n","  Gx <- matrix(0, nrow = nrow(image), ncol = ncol(image))\n","  Gy <- matrix(0, nrow = nrow(image), ncol = ncol(image))\n","  \n","  # Compute gradients pixel by pixel\n","  for (i in 2:(nrow(image) - 1)) {\n","    for (j in 2:(ncol(image) - 1)) {\n","      # Compute gradient components using Sobel operators\n","      subset <- image[(i - 1):(i + 1), (j - 1):(j + 1)]\n","      Gx[i, j] <- sum(subset * gx)\n","      Gy[i, j] <- sum(subset * gy)\n","    }\n","  }\n","  \n","  # Compute gradient magnitude and angle\n","  magnitude <- sqrt(Gx^2 + Gy^2)\n","  angle <- atan2(Gy, Gx) * (180 / pi)\n","  \n","  return(list(magnitude = magnitude, angle = angle))\n","}\n","\n","compute_histogram <- function(magnitude, angle, num_bins = 9) {\n","  # Initialize histogram\n","  histogram <- rep(0, num_bins)\n","  \n","  # Compute histogram\n","  bin_width <- 180 / num_bins\n","  angle <- angle %% 180  # Ensure angles are in [0, 180) range\n","  for (i in 1:length(angle)) {\n","    if (!is.na(angle[i])) {  # Skip NA values\n","      bin <- floor(angle[i] / bin_width) + 1\n","      histogram[bin] <- histogram[bin] + magnitude[i]\n","    }\n","  }\n","  \n","  return(histogram)\n","}\n","\n","compute_block_descriptor <- function(histogram, block_size = 2) {\n","  num_bins <- length(histogram)\n","  num_cells <- block_size^2\n","  \n","  # Initialize block descriptor\n","  block_descriptor <- rep(0, num_bins * num_cells)\n","  \n","  # Populate block descriptor\n","  block_descriptor[1:num_bins] <- histogram\n","\n","    # L2 normalization\n","  norm_factor <- sqrt(sum(block_descriptor^2) + 1e-5)\n","  block_descriptor <- block_descriptor / norm_factor\n","  \n","  return(block_descriptor)\n","}\n","\n"]},{"cell_type":"markdown","id":"87b4a205","metadata":{"papermill":{"duration":0.010802,"end_time":"2025-11-12T14:29:41.456604","exception":false,"start_time":"2025-11-12T14:29:41.445802","status":"completed"},"tags":[]},"source":["**Extracting the features.**"]},{"cell_type":"code","execution_count":14,"id":"cbfcf8df","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:29:41.482623Z","iopub.status.busy":"2025-11-12T14:29:41.481002Z","iopub.status.idle":"2025-11-12T14:30:06.505543Z","shell.execute_reply":"2025-11-12T14:30:06.503663Z"},"papermill":{"duration":25.042091,"end_time":"2025-11-12T14:30:06.50962","exception":false,"start_time":"2025-11-12T14:29:41.467529","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["'324 Histogram of Oriented Gradients Features'"],"text/latex":["'324 Histogram of Oriented Gradients Features'"],"text/markdown":["'324 Histogram of Oriented Gradients Features'"],"text/plain":["[1] \"324 Histogram of Oriented Gradients Features\""]},"metadata":{},"output_type":"display_data"}],"source":["# function for extraction the HOG features.\n","extract_hog_features <- function(image_as_row, cell_size = 8, block_size = 2, num_bins = 9) {\n","  image <- image_as_row %>% unlist() %>% matrix(48)\n","  \n","  # Compute gradients\n","  gradients <- compute_gradients(image)\n","\n","  # Define cell grid\n","  num_cells_x <- floor(ncol(image) / cell_size)\n","  num_cells_y <- floor(nrow(image) / cell_size)\n","\n","  # Initialize HOG features\n","  hog_features <- numeric()\n","\n","  for (i in 1:num_cells_y) {\n","    for (j in 1:num_cells_x) {\n","      start_x <- (j - 1) * cell_size + 1\n","      start_y <- (i - 1) * cell_size + 1\n","      end_x <- start_x + cell_size - 1\n","       end_y <- start_y + cell_size - 1\n","\n","      # Extract cell region\n","      cell_magnitude <- gradients$magnitude[start_y:end_y, start_x:end_x]\n","      cell_angle <- gradients$angle[start_y:end_y, start_x:end_x]\n","\n","      # Compute cell histogram\n","      cell_histogram <- compute_histogram(cell_magnitude, cell_angle, num_bins)[1:9]\n","\n","      # Append cell histogram to features\n","      hog_features <- c(hog_features, cell_histogram)\n","    }\n","  }\n","\n","  # Reshape HOG features into block descriptors\n","  num_blocks_x <- num_cells_x - block_size + 1\n","  num_blocks_y <- num_cells_y - block_size + 1\n","\n","  for (i in 1:num_blocks_y) {\n","    for (j in 1:num_blocks_x) {\n","      start_idx <- (i - 1) * num_blocks_x + j\n","      end_idx <- start_idx + block_size^2 - 1\n","      block_descriptor <- compute_block_descriptor(\n","        hog_features[start_idx:end_idx],\n","        block_size\n","      )\n","\n","      hog_features[start_idx:end_idx] <- block_descriptor\n","    }\n","  }\n","\n","  return(hog_features)\n","}\n","\n","# Extract features\n","options(warn = -1)\n","features_hog <- apply(X, 1, extract_hog_features) %>% t()\n","paste(ncol(features_hog), \"Histogram of Oriented Gradients Features\")\n","options(warn = 0)"]},{"cell_type":"markdown","id":"51d2b27e","metadata":{"_cell_guid":"c198ec24-dfaa-4312-8fdf-2da85d8ba67d","_uuid":"308f6cbc-7a78-4ab2-8dc4-3809b47ef6bc","papermill":{"duration":0.011615,"end_time":"2025-11-12T14:30:06.533521","exception":false,"start_time":"2025-11-12T14:30:06.521906","status":"completed"},"tags":[]},"source":["# 4. Fitting a model\n","\n","In this section, we aim to identify a model that achieves the best balance between bias and variance, as well as between accuracy and flexibility. We will fit a Decision tree (Classification tree), k-Nearest neighbours (KNN), support vector machine (SVM), and random forest. Decision trees are a good starting point due to it being easy to interpret, but can overfit easily. KNN and SVM are methods with higher flexibility by handling non-linear patterns in the data. Random forests are the least prone to overfitting and can perform well without extensive tuning. \n","\n","## 4.1 Combining features"]},{"cell_type":"code","execution_count":15,"id":"c61099e5","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:30:06.562034Z","iopub.status.busy":"2025-11-12T14:30:06.560336Z","iopub.status.idle":"2025-11-12T14:30:09.131529Z","shell.execute_reply":"2025-11-12T14:30:09.128125Z"},"papermill":{"duration":2.589098,"end_time":"2025-11-12T14:30:09.135134","exception":false,"start_time":"2025-11-12T14:30:06.546036","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["All features have the same rows =  TRUE"]},{"data":{"text/html":["'Before cleaning we have 4711 features total'"],"text/latex":["'Before cleaning we have 4711 features total'"],"text/markdown":["'Before cleaning we have 4711 features total'"],"text/plain":["[1] \"Before cleaning we have 4711 features total\""]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A data.frame: 6 × 4711</caption>\n","<thead>\n","\t<tr><th></th><th scope=col>p1</th><th scope=col>p2</th><th scope=col>p3</th><th scope=col>p4</th><th scope=col>p5</th><th scope=col>p6</th><th scope=col>p7</th><th scope=col>p8</th><th scope=col>p9</th><th scope=col>p10</th><th scope=col>⋯</th><th scope=col>deep1918</th><th scope=col>deep1919</th><th scope=col>deep1920</th><th scope=col>spectral_centroid</th><th scope=col>spectral_spread</th><th scope=col>spectral_skewness</th><th scope=col>spectral_kurtosis</th><th scope=col>spectral_entropy</th><th scope=col>dominant_frequency</th><th scope=col>total_power</th></tr>\n","\t<tr><th></th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>⋯</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><th scope=row>anger/S010_004_00000018a.png</th><td>0.06666667</td><td>0.04705882</td><td>0.03529412</td><td>0.01960784</td><td>0.03137255</td><td>0.05490196</td><td>0.05882353</td><td>0.07450980</td><td>0.06666667</td><td>0.04705882</td><td>⋯</td><td>0</td><td>0.08307651</td><td>0</td><td>0.03987189</td><td>0.05853984</td><td>4.161531</td><td>24.65908</td><td>2.307404</td><td>0.01504483</td><td> 855566.2</td></tr>\n","\t<tr><th scope=row>anger/S010_004_00000018b.png</th><td>0.06274510</td><td>0.07058824</td><td>0.07058824</td><td>0.05490196</td><td>0.03921569</td><td>0.03921569</td><td>0.03921569</td><td>0.04313725</td><td>0.04313725</td><td>0.04313725</td><td>⋯</td><td>0</td><td>0.13250442</td><td>0</td><td>0.05022290</td><td>0.07513099</td><td>3.154479</td><td>14.30706</td><td>2.460591</td><td>0.01504483</td><td>1159014.8</td></tr>\n","\t<tr><th scope=row>anger/S010_004_00000018c.png</th><td>0.00000000</td><td>0.04705882</td><td>0.04705882</td><td>0.05882353</td><td>0.07058824</td><td>0.08235294</td><td>0.08627451</td><td>0.08627451</td><td>0.07450980</td><td>0.06666667</td><td>⋯</td><td>0</td><td>0.11880903</td><td>0</td><td>0.04947601</td><td>0.07165529</td><td>3.197617</td><td>15.17287</td><td>2.374705</td><td>0.01504483</td><td>1304149.9</td></tr>\n","\t<tr><th scope=row>anger/S010_004_00000018d.png</th><td>1.00000000</td><td>0.94901961</td><td>0.02352941</td><td>0.04313725</td><td>0.02745098</td><td>0.02745098</td><td>0.03529412</td><td>0.02745098</td><td>0.03137255</td><td>0.04313725</td><td>⋯</td><td>0</td><td>0.07079908</td><td>0</td><td>0.05148382</td><td>0.07619062</td><td>3.035214</td><td>13.40092</td><td>2.449889</td><td>0.01504483</td><td>1075618.1</td></tr>\n","\t<tr><th scope=row>anger/S010_004_00000018e.png</th><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>⋯</td><td>0</td><td>0.07127059</td><td>0</td><td>0.05822440</td><td>0.08818660</td><td>2.701246</td><td>10.44907</td><td>2.576386</td><td>0.01504483</td><td>1107776.5</td></tr>\n","\t<tr><th scope=row>anger/S010_004_00000018f.png</th><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>⋯</td><td>0</td><td>0.07821971</td><td>0</td><td>0.05094794</td><td>0.07327949</td><td>2.980534</td><td>13.47595</td><td>2.489124</td><td>0.01504483</td><td>1175793.7</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A data.frame: 6 × 4711\n","\\begin{tabular}{r|lllllllllllllllllllll}\n","  & p1 & p2 & p3 & p4 & p5 & p6 & p7 & p8 & p9 & p10 & ⋯ & deep1918 & deep1919 & deep1920 & spectral\\_centroid & spectral\\_spread & spectral\\_skewness & spectral\\_kurtosis & spectral\\_entropy & dominant\\_frequency & total\\_power\\\\\n","  & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & ⋯ & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl>\\\\\n","\\hline\n","\tanger/S010\\_004\\_00000018a.png & 0.06666667 & 0.04705882 & 0.03529412 & 0.01960784 & 0.03137255 & 0.05490196 & 0.05882353 & 0.07450980 & 0.06666667 & 0.04705882 & ⋯ & 0 & 0.08307651 & 0 & 0.03987189 & 0.05853984 & 4.161531 & 24.65908 & 2.307404 & 0.01504483 &  855566.2\\\\\n","\tanger/S010\\_004\\_00000018b.png & 0.06274510 & 0.07058824 & 0.07058824 & 0.05490196 & 0.03921569 & 0.03921569 & 0.03921569 & 0.04313725 & 0.04313725 & 0.04313725 & ⋯ & 0 & 0.13250442 & 0 & 0.05022290 & 0.07513099 & 3.154479 & 14.30706 & 2.460591 & 0.01504483 & 1159014.8\\\\\n","\tanger/S010\\_004\\_00000018c.png & 0.00000000 & 0.04705882 & 0.04705882 & 0.05882353 & 0.07058824 & 0.08235294 & 0.08627451 & 0.08627451 & 0.07450980 & 0.06666667 & ⋯ & 0 & 0.11880903 & 0 & 0.04947601 & 0.07165529 & 3.197617 & 15.17287 & 2.374705 & 0.01504483 & 1304149.9\\\\\n","\tanger/S010\\_004\\_00000018d.png & 1.00000000 & 0.94901961 & 0.02352941 & 0.04313725 & 0.02745098 & 0.02745098 & 0.03529412 & 0.02745098 & 0.03137255 & 0.04313725 & ⋯ & 0 & 0.07079908 & 0 & 0.05148382 & 0.07619062 & 3.035214 & 13.40092 & 2.449889 & 0.01504483 & 1075618.1\\\\\n","\tanger/S010\\_004\\_00000018e.png & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & ⋯ & 0 & 0.07127059 & 0 & 0.05822440 & 0.08818660 & 2.701246 & 10.44907 & 2.576386 & 0.01504483 & 1107776.5\\\\\n","\tanger/S010\\_004\\_00000018f.png & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & ⋯ & 0 & 0.07821971 & 0 & 0.05094794 & 0.07327949 & 2.980534 & 13.47595 & 2.489124 & 0.01504483 & 1175793.7\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A data.frame: 6 × 4711\n","\n","| <!--/--> | p1 &lt;dbl&gt; | p2 &lt;dbl&gt; | p3 &lt;dbl&gt; | p4 &lt;dbl&gt; | p5 &lt;dbl&gt; | p6 &lt;dbl&gt; | p7 &lt;dbl&gt; | p8 &lt;dbl&gt; | p9 &lt;dbl&gt; | p10 &lt;dbl&gt; | ⋯ ⋯ | deep1918 &lt;dbl&gt; | deep1919 &lt;dbl&gt; | deep1920 &lt;dbl&gt; | spectral_centroid &lt;dbl&gt; | spectral_spread &lt;dbl&gt; | spectral_skewness &lt;dbl&gt; | spectral_kurtosis &lt;dbl&gt; | spectral_entropy &lt;dbl&gt; | dominant_frequency &lt;dbl&gt; | total_power &lt;dbl&gt; |\n","|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|\n","| anger/S010_004_00000018a.png | 0.06666667 | 0.04705882 | 0.03529412 | 0.01960784 | 0.03137255 | 0.05490196 | 0.05882353 | 0.07450980 | 0.06666667 | 0.04705882 | ⋯ | 0 | 0.08307651 | 0 | 0.03987189 | 0.05853984 | 4.161531 | 24.65908 | 2.307404 | 0.01504483 |  855566.2 |\n","| anger/S010_004_00000018b.png | 0.06274510 | 0.07058824 | 0.07058824 | 0.05490196 | 0.03921569 | 0.03921569 | 0.03921569 | 0.04313725 | 0.04313725 | 0.04313725 | ⋯ | 0 | 0.13250442 | 0 | 0.05022290 | 0.07513099 | 3.154479 | 14.30706 | 2.460591 | 0.01504483 | 1159014.8 |\n","| anger/S010_004_00000018c.png | 0.00000000 | 0.04705882 | 0.04705882 | 0.05882353 | 0.07058824 | 0.08235294 | 0.08627451 | 0.08627451 | 0.07450980 | 0.06666667 | ⋯ | 0 | 0.11880903 | 0 | 0.04947601 | 0.07165529 | 3.197617 | 15.17287 | 2.374705 | 0.01504483 | 1304149.9 |\n","| anger/S010_004_00000018d.png | 1.00000000 | 0.94901961 | 0.02352941 | 0.04313725 | 0.02745098 | 0.02745098 | 0.03529412 | 0.02745098 | 0.03137255 | 0.04313725 | ⋯ | 0 | 0.07079908 | 0 | 0.05148382 | 0.07619062 | 3.035214 | 13.40092 | 2.449889 | 0.01504483 | 1075618.1 |\n","| anger/S010_004_00000018e.png | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | ⋯ | 0 | 0.07127059 | 0 | 0.05822440 | 0.08818660 | 2.701246 | 10.44907 | 2.576386 | 0.01504483 | 1107776.5 |\n","| anger/S010_004_00000018f.png | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | ⋯ | 0 | 0.07821971 | 0 | 0.05094794 | 0.07327949 | 2.980534 | 13.47595 | 2.489124 | 0.01504483 | 1175793.7 |\n","\n"],"text/plain":["                             p1         p2         p3         p4        \n","anger/S010_004_00000018a.png 0.06666667 0.04705882 0.03529412 0.01960784\n","anger/S010_004_00000018b.png 0.06274510 0.07058824 0.07058824 0.05490196\n","anger/S010_004_00000018c.png 0.00000000 0.04705882 0.04705882 0.05882353\n","anger/S010_004_00000018d.png 1.00000000 0.94901961 0.02352941 0.04313725\n","anger/S010_004_00000018e.png 1.00000000 1.00000000 1.00000000 1.00000000\n","anger/S010_004_00000018f.png 1.00000000 1.00000000 1.00000000 1.00000000\n","                             p5         p6         p7         p8        \n","anger/S010_004_00000018a.png 0.03137255 0.05490196 0.05882353 0.07450980\n","anger/S010_004_00000018b.png 0.03921569 0.03921569 0.03921569 0.04313725\n","anger/S010_004_00000018c.png 0.07058824 0.08235294 0.08627451 0.08627451\n","anger/S010_004_00000018d.png 0.02745098 0.02745098 0.03529412 0.02745098\n","anger/S010_004_00000018e.png 1.00000000 1.00000000 1.00000000 1.00000000\n","anger/S010_004_00000018f.png 1.00000000 1.00000000 1.00000000 1.00000000\n","                             p9         p10        ⋯ deep1918 deep1919  \n","anger/S010_004_00000018a.png 0.06666667 0.04705882 ⋯ 0        0.08307651\n","anger/S010_004_00000018b.png 0.04313725 0.04313725 ⋯ 0        0.13250442\n","anger/S010_004_00000018c.png 0.07450980 0.06666667 ⋯ 0        0.11880903\n","anger/S010_004_00000018d.png 0.03137255 0.04313725 ⋯ 0        0.07079908\n","anger/S010_004_00000018e.png 1.00000000 1.00000000 ⋯ 0        0.07127059\n","anger/S010_004_00000018f.png 1.00000000 1.00000000 ⋯ 0        0.07821971\n","                             deep1920 spectral_centroid spectral_spread\n","anger/S010_004_00000018a.png 0        0.03987189        0.05853984     \n","anger/S010_004_00000018b.png 0        0.05022290        0.07513099     \n","anger/S010_004_00000018c.png 0        0.04947601        0.07165529     \n","anger/S010_004_00000018d.png 0        0.05148382        0.07619062     \n","anger/S010_004_00000018e.png 0        0.05822440        0.08818660     \n","anger/S010_004_00000018f.png 0        0.05094794        0.07327949     \n","                             spectral_skewness spectral_kurtosis\n","anger/S010_004_00000018a.png 4.161531          24.65908         \n","anger/S010_004_00000018b.png 3.154479          14.30706         \n","anger/S010_004_00000018c.png 3.197617          15.17287         \n","anger/S010_004_00000018d.png 3.035214          13.40092         \n","anger/S010_004_00000018e.png 2.701246          10.44907         \n","anger/S010_004_00000018f.png 2.980534          13.47595         \n","                             spectral_entropy dominant_frequency total_power\n","anger/S010_004_00000018a.png 2.307404         0.01504483          855566.2  \n","anger/S010_004_00000018b.png 2.460591         0.01504483         1159014.8  \n","anger/S010_004_00000018c.png 2.374705         0.01504483         1304149.9  \n","anger/S010_004_00000018d.png 2.449889         0.01504483         1075618.1  \n","anger/S010_004_00000018e.png 2.576386         0.01504483         1107776.5  \n","anger/S010_004_00000018f.png 2.489124         0.01504483         1175793.7  "]},"metadata":{},"output_type":"display_data"}],"source":["indicator <- identical(nrow(features_col_row_means),\n","          nrow(features_image_sum_stats),\n","          nrow(features_hog),\n","          nrow(freyslate_feat),\n","          nrow(deep_features), \n","          nrow(spectral_features))\n","\n","# Check if all feature matrices have the same number of rows\n","cat(\"All features have the same rows = \", indicator) # should be TRUE\n","\n","if(indicator == TRUE){\n","    features_all_combined <- cbind(X, \n","                               features_col_row_means,   # Row & Col Means Features\n","                               features_image_sum_stats, # Image Sum Statistics Features\n","                               features_hog,\n","                               freyslate_feat,\n","                               deep_features, \n","                               spectral_features)\n","\n","paste(\"Before cleaning we have\", ncol(features_all_combined), \"features total\")\n","}\n","\n","# Glimpse at matrix with all features\n","head(features_all_combined)"]},{"cell_type":"markdown","id":"6ad4c1c0","metadata":{"papermill":{"duration":0.012358,"end_time":"2025-11-12T14:30:09.159051","exception":false,"start_time":"2025-11-12T14:30:09.146693","status":"completed"},"tags":[]},"source":["## 4.2 Cleaning\n","Before model fitting, all feature sets were merged into one dataset. We then removed features with near-zero variance and features who were highly correlated to reduce redundancy. Finally, we remove rows with missing values to obtain a cleaned feature dataset ready for model fitting. \n","\n","**NZV**"]},{"cell_type":"code","execution_count":16,"id":"3fa741a4","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:30:09.185774Z","iopub.status.busy":"2025-11-12T14:30:09.184148Z","iopub.status.idle":"2025-11-12T14:30:36.459937Z","shell.execute_reply":"2025-11-12T14:30:36.457394Z"},"papermill":{"duration":27.29273,"end_time":"2025-11-12T14:30:36.463311","exception":false,"start_time":"2025-11-12T14:30:09.170581","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["'We have removed 1262 features because they have near zero variance.'"],"text/latex":["'We have removed 1262 features because they have near zero variance.'"],"text/markdown":["'We have removed 1262 features because they have near zero variance.'"],"text/plain":["[1] \"We have removed 1262 features because they have near zero variance.\""]},"metadata":{},"output_type":"display_data"}],"source":["# removing near zero variance features\n","# Convert matrix to tibble\n","features <- features_all_combined %>%\n","  as_tibble()\n","\n","# Parallel Processing \n","cl <- parallel::makePSOCKcluster(4)\n","doParallel::registerDoParallel(cl)\n","# Compute Near-Zero-Variance features \n","features <- features %>% select(where(is.numeric))\n","nzv_features <- caret::nearZeroVar(features, \n","                                   freqCut = 95/5, \n","                                   names = TRUE,\n","                                   allowParallel = TRUE)\n","\n","# Remove near zero variance features\n","features <- features %>%\n","    select(-all_of(nzv_features))\n","\n","paste(\"We have removed\", length(nzv_features), \"features because they have near zero variance.\")"]},{"cell_type":"markdown","id":"d6c4d4fd","metadata":{"papermill":{"duration":0.011553,"end_time":"2025-11-12T14:30:36.486815","exception":false,"start_time":"2025-11-12T14:30:36.475262","status":"completed"},"tags":[]},"source":["**Highly Correlated features**"]},{"cell_type":"code","execution_count":17,"id":"f88e3e57","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:30:36.513987Z","iopub.status.busy":"2025-11-12T14:30:36.512366Z","iopub.status.idle":"2025-11-12T14:31:31.126938Z","shell.execute_reply":"2025-11-12T14:31:31.124954Z"},"papermill":{"duration":54.631736,"end_time":"2025-11-12T14:31:31.13013","exception":false,"start_time":"2025-11-12T14:30:36.498394","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["'We have removed 510 features because they were highly correlated.'"],"text/latex":["'We have removed 510 features because they were highly correlated.'"],"text/markdown":["'We have removed 510 features because they were highly correlated.'"],"text/plain":["[1] \"We have removed 510 features because they were highly correlated.\""]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["'After cleaning we have 2518 features total'"],"text/latex":["'After cleaning we have 2518 features total'"],"text/markdown":["'After cleaning we have 2518 features total'"],"text/plain":["[1] \"After cleaning we have 2518 features total\""]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A tibble: 6 × 2518</caption>\n","<thead>\n","\t<tr><th scope=col>p2</th><th scope=col>p3</th><th scope=col>p4</th><th scope=col>p5</th><th scope=col>p6</th><th scope=col>p25</th><th scope=col>p27</th><th scope=col>p32</th><th scope=col>p43</th><th scope=col>p49</th><th scope=col>⋯</th><th scope=col>deep695</th><th scope=col>deep696</th><th scope=col>deep699</th><th scope=col>deep701</th><th scope=col>deep702</th><th scope=col>deep706</th><th scope=col>deep708</th><th scope=col>deep709</th><th scope=col>deep713</th><th scope=col>deep714</th></tr>\n","\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>⋯</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>0.04705882</td><td>0.03529412</td><td>0.01960784</td><td>0.03137255</td><td>0.05490196</td><td>0.89803922</td><td>0.9843137</td><td>0.24705882</td><td>0.7843137</td><td>0.03921569</td><td>⋯</td><td>0.0007804027</td><td>0.002565077</td><td>5.350163</td><td>0.002087944</td><td>0.001551982</td><td>0.02101851</td><td>0.03077108</td><td>0.4141147</td><td>0</td><td>0.000965155</td></tr>\n","\t<tr><td>0.07058824</td><td>0.07058824</td><td>0.05490196</td><td>0.03921569</td><td>0.03921569</td><td>0.24313725</td><td>0.5333333</td><td>0.01176471</td><td>0.8862745</td><td>0.06666667</td><td>⋯</td><td>0.0007711181</td><td>0.002572681</td><td>5.117250</td><td>0.002463604</td><td>0.001671014</td><td>0.02046135</td><td>0.02877122</td><td>0.2511819</td><td>0</td><td>0.001077118</td></tr>\n","\t<tr><td>0.04705882</td><td>0.04705882</td><td>0.05882353</td><td>0.07058824</td><td>0.08235294</td><td>0.11372549</td><td>0.3411765</td><td>0.00000000</td><td>0.7803922</td><td>0.00000000</td><td>⋯</td><td>0.0006707981</td><td>0.002429520</td><td>5.541248</td><td>0.002112925</td><td>0.001534091</td><td>0.02101058</td><td>0.02940295</td><td>0.3194856</td><td>0</td><td>0.001248008</td></tr>\n","\t<tr><td>0.94901961</td><td>0.02352941</td><td>0.04313725</td><td>0.02745098</td><td>0.02745098</td><td>0.09803922</td><td>0.3450980</td><td>0.52156863</td><td>0.1764706</td><td>1.00000000</td><td>⋯</td><td>0.0006989480</td><td>0.002272020</td><td>5.113493</td><td>0.001328480</td><td>0.001561650</td><td>0.01979307</td><td>0.02692631</td><td>0.1527566</td><td>0</td><td>0.001020134</td></tr>\n","\t<tr><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.0000000</td><td>1.00000000</td><td>1.0000000</td><td>1.00000000</td><td>⋯</td><td>0.0007497425</td><td>0.002159919</td><td>5.039506</td><td>0.000000000</td><td>0.001244684</td><td>0.01990044</td><td>0.02568110</td><td>0.1538654</td><td>0</td><td>0.001147192</td></tr>\n","\t<tr><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.00000000</td><td>1.0000000</td><td>0.94509804</td><td>0.4000000</td><td>1.00000000</td><td>⋯</td><td>0.0006851369</td><td>0.002141954</td><td>4.856687</td><td>0.001124647</td><td>0.001258418</td><td>0.01976500</td><td>0.02602254</td><td>0.1015198</td><td>0</td><td>0.001082356</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A tibble: 6 × 2518\n","\\begin{tabular}{lllllllllllllllllllll}\n"," p2 & p3 & p4 & p5 & p6 & p25 & p27 & p32 & p43 & p49 & ⋯ & deep695 & deep696 & deep699 & deep701 & deep702 & deep706 & deep708 & deep709 & deep713 & deep714\\\\\n"," <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & ⋯ & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <dbl>\\\\\n","\\hline\n","\t 0.04705882 & 0.03529412 & 0.01960784 & 0.03137255 & 0.05490196 & 0.89803922 & 0.9843137 & 0.24705882 & 0.7843137 & 0.03921569 & ⋯ & 0.0007804027 & 0.002565077 & 5.350163 & 0.002087944 & 0.001551982 & 0.02101851 & 0.03077108 & 0.4141147 & 0 & 0.000965155\\\\\n","\t 0.07058824 & 0.07058824 & 0.05490196 & 0.03921569 & 0.03921569 & 0.24313725 & 0.5333333 & 0.01176471 & 0.8862745 & 0.06666667 & ⋯ & 0.0007711181 & 0.002572681 & 5.117250 & 0.002463604 & 0.001671014 & 0.02046135 & 0.02877122 & 0.2511819 & 0 & 0.001077118\\\\\n","\t 0.04705882 & 0.04705882 & 0.05882353 & 0.07058824 & 0.08235294 & 0.11372549 & 0.3411765 & 0.00000000 & 0.7803922 & 0.00000000 & ⋯ & 0.0006707981 & 0.002429520 & 5.541248 & 0.002112925 & 0.001534091 & 0.02101058 & 0.02940295 & 0.3194856 & 0 & 0.001248008\\\\\n","\t 0.94901961 & 0.02352941 & 0.04313725 & 0.02745098 & 0.02745098 & 0.09803922 & 0.3450980 & 0.52156863 & 0.1764706 & 1.00000000 & ⋯ & 0.0006989480 & 0.002272020 & 5.113493 & 0.001328480 & 0.001561650 & 0.01979307 & 0.02692631 & 0.1527566 & 0 & 0.001020134\\\\\n","\t 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.0000000 & 1.00000000 & 1.0000000 & 1.00000000 & ⋯ & 0.0007497425 & 0.002159919 & 5.039506 & 0.000000000 & 0.001244684 & 0.01990044 & 0.02568110 & 0.1538654 & 0 & 0.001147192\\\\\n","\t 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.00000000 & 1.0000000 & 0.94509804 & 0.4000000 & 1.00000000 & ⋯ & 0.0006851369 & 0.002141954 & 4.856687 & 0.001124647 & 0.001258418 & 0.01976500 & 0.02602254 & 0.1015198 & 0 & 0.001082356\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A tibble: 6 × 2518\n","\n","| p2 &lt;dbl&gt; | p3 &lt;dbl&gt; | p4 &lt;dbl&gt; | p5 &lt;dbl&gt; | p6 &lt;dbl&gt; | p25 &lt;dbl&gt; | p27 &lt;dbl&gt; | p32 &lt;dbl&gt; | p43 &lt;dbl&gt; | p49 &lt;dbl&gt; | ⋯ ⋯ | deep695 &lt;dbl&gt; | deep696 &lt;dbl&gt; | deep699 &lt;dbl&gt; | deep701 &lt;dbl&gt; | deep702 &lt;dbl&gt; | deep706 &lt;dbl&gt; | deep708 &lt;dbl&gt; | deep709 &lt;dbl&gt; | deep713 &lt;dbl&gt; | deep714 &lt;dbl&gt; |\n","|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|\n","| 0.04705882 | 0.03529412 | 0.01960784 | 0.03137255 | 0.05490196 | 0.89803922 | 0.9843137 | 0.24705882 | 0.7843137 | 0.03921569 | ⋯ | 0.0007804027 | 0.002565077 | 5.350163 | 0.002087944 | 0.001551982 | 0.02101851 | 0.03077108 | 0.4141147 | 0 | 0.000965155 |\n","| 0.07058824 | 0.07058824 | 0.05490196 | 0.03921569 | 0.03921569 | 0.24313725 | 0.5333333 | 0.01176471 | 0.8862745 | 0.06666667 | ⋯ | 0.0007711181 | 0.002572681 | 5.117250 | 0.002463604 | 0.001671014 | 0.02046135 | 0.02877122 | 0.2511819 | 0 | 0.001077118 |\n","| 0.04705882 | 0.04705882 | 0.05882353 | 0.07058824 | 0.08235294 | 0.11372549 | 0.3411765 | 0.00000000 | 0.7803922 | 0.00000000 | ⋯ | 0.0006707981 | 0.002429520 | 5.541248 | 0.002112925 | 0.001534091 | 0.02101058 | 0.02940295 | 0.3194856 | 0 | 0.001248008 |\n","| 0.94901961 | 0.02352941 | 0.04313725 | 0.02745098 | 0.02745098 | 0.09803922 | 0.3450980 | 0.52156863 | 0.1764706 | 1.00000000 | ⋯ | 0.0006989480 | 0.002272020 | 5.113493 | 0.001328480 | 0.001561650 | 0.01979307 | 0.02692631 | 0.1527566 | 0 | 0.001020134 |\n","| 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.0000000 | 1.00000000 | 1.0000000 | 1.00000000 | ⋯ | 0.0007497425 | 0.002159919 | 5.039506 | 0.000000000 | 0.001244684 | 0.01990044 | 0.02568110 | 0.1538654 | 0 | 0.001147192 |\n","| 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.00000000 | 1.0000000 | 0.94509804 | 0.4000000 | 1.00000000 | ⋯ | 0.0006851369 | 0.002141954 | 4.856687 | 0.001124647 | 0.001258418 | 0.01976500 | 0.02602254 | 0.1015198 | 0 | 0.001082356 |\n","\n"],"text/plain":["  p2         p3         p4         p5         p6         p25        p27      \n","1 0.04705882 0.03529412 0.01960784 0.03137255 0.05490196 0.89803922 0.9843137\n","2 0.07058824 0.07058824 0.05490196 0.03921569 0.03921569 0.24313725 0.5333333\n","3 0.04705882 0.04705882 0.05882353 0.07058824 0.08235294 0.11372549 0.3411765\n","4 0.94901961 0.02352941 0.04313725 0.02745098 0.02745098 0.09803922 0.3450980\n","5 1.00000000 1.00000000 1.00000000 1.00000000 1.00000000 1.00000000 1.0000000\n","6 1.00000000 1.00000000 1.00000000 1.00000000 1.00000000 1.00000000 1.0000000\n","  p32        p43       p49        ⋯ deep695      deep696     deep699 \n","1 0.24705882 0.7843137 0.03921569 ⋯ 0.0007804027 0.002565077 5.350163\n","2 0.01176471 0.8862745 0.06666667 ⋯ 0.0007711181 0.002572681 5.117250\n","3 0.00000000 0.7803922 0.00000000 ⋯ 0.0006707981 0.002429520 5.541248\n","4 0.52156863 0.1764706 1.00000000 ⋯ 0.0006989480 0.002272020 5.113493\n","5 1.00000000 1.0000000 1.00000000 ⋯ 0.0007497425 0.002159919 5.039506\n","6 0.94509804 0.4000000 1.00000000 ⋯ 0.0006851369 0.002141954 4.856687\n","  deep701     deep702     deep706    deep708    deep709   deep713 deep714    \n","1 0.002087944 0.001551982 0.02101851 0.03077108 0.4141147 0       0.000965155\n","2 0.002463604 0.001671014 0.02046135 0.02877122 0.2511819 0       0.001077118\n","3 0.002112925 0.001534091 0.02101058 0.02940295 0.3194856 0       0.001248008\n","4 0.001328480 0.001561650 0.01979307 0.02692631 0.1527566 0       0.001020134\n","5 0.000000000 0.001244684 0.01990044 0.02568110 0.1538654 0       0.001147192\n","6 0.001124647 0.001258418 0.01976500 0.02602254 0.1015198 0       0.001082356"]},"metadata":{},"output_type":"display_data"}],"source":["# Compute highly correlating features\n","high_cor_feat <- caret::findCorrelation(cor(features), cutoff = 0.98, names = TRUE)\n","# Remove highly correlating features \n","features <- features %>% \n","  select(-all_of(high_cor_feat))\n","\n","# remove linear combinations\n","flc <- findLinearCombos(as.matrix(features))\n","\n","lincomb_idx <- if (!is.null(flc$remove)) flc$remove else integer(0)\n","\n","if (length(lincomb_idx) > 0) {\n","  features <- features[, -lincomb_idx, drop = FALSE]\n","}\n","\n","\n","# training medians for later imputation on test:\n","train_medians <- vapply(features, \\(x) median(x, na.rm = TRUE), numeric(1))\n","\n","\n","# drop rows with any NA across X or y)\n","#keep <- complete.cases(features) & !is.na(y)\n","#features <- features[keep, , drop = FALSE]\n","#y <- y[keep]\n","\n","# RETURN RESULTS\n","paste(\"We have removed\", length(high_cor_feat), \"features because they were highly correlated.\")\n","paste(\"After cleaning we have\", ncol(features), \"features total\")\n","\n","# Glimpse at final design matrix\n","head(features)"]},{"cell_type":"markdown","id":"154d4b9a","metadata":{"papermill":{"duration":0.013396,"end_time":"2025-11-12T14:31:31.157722","exception":false,"start_time":"2025-11-12T14:31:31.144326","status":"completed"},"tags":[]},"source":["We now repeat the process but using the test data"]},{"cell_type":"code","execution_count":18,"id":"5b00ad43","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:31:31.186753Z","iopub.status.busy":"2025-11-12T14:31:31.185117Z","iopub.status.idle":"2025-11-12T14:32:23.09218Z","shell.execute_reply":"2025-11-12T14:32:23.090317Z"},"papermill":{"duration":51.925645,"end_time":"2025-11-12T14:32:23.095999","exception":false,"start_time":"2025-11-12T14:31:31.170354","status":"completed"},"tags":[]},"outputs":[],"source":["#LLM start: https://chatgpt.com/share/68f540b1-ebac-800e-b9c3-20a5766328f8------------\n","suppressWarnings({\n","  # 1) Build the same features on X_test (you already have these)\n","  features_col_row_means_test   <- X_test %>% asplit(1) %>% map_dfr(calculate_image_means)\n","  features_image_sum_stats_test <- X_test %>% asplit(1) %>% map_dfr(calculate_image_stats)\n","  features_hog_test             <- apply(X_test, 1, extract_hog_features) %>% t() %>% as_tibble()\n","  freyslate_feat_test           <- Frey_slate_features(X_test)\n","  deep_features_test            <- extract_deep_features(X_test, corr_cutoff = 0.95, verbose = FALSE)\n","  spectral_features_test        <- get_spectral_features(X_test)\n","\n","  features_all_combined_test <- cbind(\n","    X_test,\n","    features_col_row_means_test,\n","    features_image_sum_stats_test,\n","    features_hog_test,\n","    freyslate_feat_test,\n","    deep_features_test,\n","    spectral_features_test\n","  )\n","\n","  features_test <- as_tibble(features_all_combined_test)\n","\n","  # 2) Drop the SAME columns removed on training\n","  #    (Assumes you saved `nzv_features`, `high_cor_feat`, and `lincomb_names` from training.)\n","  drops <- unique(c(nzv_features, high_cor_feat, lincomb_idx))\n","  drops <- intersect(drops, colnames(features_test))\n","  if (length(drops)) features_test <- dplyr::select(features_test, -dplyr::all_of(drops))\n","\n","  # 3) Add any missing training columns (should be rare, but robust)\n","  #    Fill with 0 (or better: training medians if you computed them).\n","  missing_cols <- setdiff(colnames(features), colnames(features_test))\n","  if (length(missing_cols)) {\n","    # If you saved train_medians, use those; else fall back to 0\n","    if (exists(\"train_medians\")) {\n","      for (nm in missing_cols) {\n","        val <- if (!is.na(train_medians[nm])) train_medians[nm] else 0\n","        features_test[[nm]] <- val\n","      }\n","    } else {\n","      for (nm in missing_cols) features_test[[nm]] <- 0\n","    }\n","  }\n","\n","  # 4) Impute any remaining NAs using training medians (keep ALL test rows)\n","  if (exists(\"train_medians\")) {\n","    common <- intersect(names(train_medians), colnames(features_test))\n","    for (nm in common) {\n","      idx_na <- is.na(features_test[[nm]])\n","      if (any(idx_na)) features_test[[nm]][idx_na] <- train_medians[nm]\n","    }\n","  }\n","\n","  # 5) Final: ensure column ORDER equals training `features`\n","  features_test <- features_test[, colnames(features), drop = FALSE]\n","})\n","#LLM stop-----------------------"]},{"cell_type":"markdown","id":"74b509b7","metadata":{"papermill":{"duration":0.012781,"end_time":"2025-11-12T14:32:23.124144","exception":false,"start_time":"2025-11-12T14:32:23.111363","status":"completed"},"tags":[]},"source":["## 4.3 Model fitting function\n","\n","We will create a function that is able to fit all the models to reduce unnecessary clutter in the notebook. "]},{"cell_type":"code","execution_count":19,"id":"356a850c","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:32:23.154919Z","iopub.status.busy":"2025-11-12T14:32:23.153317Z","iopub.status.idle":"2025-11-12T14:32:23.23348Z","shell.execute_reply":"2025-11-12T14:32:23.231637Z"},"papermill":{"duration":0.097328,"end_time":"2025-11-12T14:32:23.236015","exception":false,"start_time":"2025-11-12T14:32:23.138687","status":"completed"},"tags":[]},"outputs":[],"source":["# Keep output clean by suppressing package messages\n","suppressMessages({\n","  library(caret)\n","  library(doMC)\n","  registerDoMC(cores = 4)\n","})\n","\n","# Create  a function with all methods \n","fit_model <- function(X, y, \n","                      method = c(\"rpart\", \"ranger\", \"svmRadial\", \"knn\", \"lda\", \"glmnet\"), # Decision tree, random forest, Support vector machine, k-nearest neighbours, linear discriminant analysis, & generalised linear model \n","                      tuneLength = 5) {\n","  \n","  method <- match.arg(method)\n","  trCntrl <- trainControl('cv', 5, allowParallel = TRUE)\n","\n","  # Define which methods require scaling\n","  scale_needed <- method %in% c(\"svmRadial\", \"knn\", \"lda\")\n","  preproc <- if (scale_needed) c(\"center\", \"scale\") else NULL\n","\n","  tt <- Sys.time()\n","\n","  model <- train(\n","    x = X,\n","    y = as.factor(y),\n","    method = method,\n","    trControl = trCntrl,\n","    tuneLength = tuneLength,\n","    preProcess = preproc\n","  )\n","\n","  cat(\"\\nExecution time:\", Sys.time() - tt, \"\\n\")\n","\n","  pred_mod <- predict(model, X)\n","  confusion_mat <- confusionMatrix(pred_mod, as.factor(y))\n","\n","  return(list(\n","    model = model,\n","    confusion = confusion_mat,\n","    accuracy = confusion_mat$overall['Accuracy']\n","  ))\n","}\n"]},{"cell_type":"markdown","id":"91d16fd7","metadata":{"papermill":{"duration":0.013456,"end_time":"2025-11-12T14:32:23.261598","exception":false,"start_time":"2025-11-12T14:32:23.248142","status":"completed"},"tags":[]},"source":["The models included in our function are Decision tree, Random forest, k-Nearest Neighbours, Linear Discriminant analysis, Generalised Linear Model, and Support Vector Machines. Below we explain why each model was selected for our classification task. \n","\n","1. Decision tree: Decision trees can provide simple and interpretable models. This can help us understand which features are useful in distinguishing emotions. However, it is easy to overfit the data using decision trees.\n","2. Random forest: Random forests are an ensemble method which combines many decision trees by averaging scores trained using a subset of data obtained through bootstrapping. By averaging predictions, it can reduce variance incurred by decision trees.\n","3. k-Nearest Neighbours: KNN is a non-parametric model that classifies images based on similarity. This can be useful in classifying emotions due to similarities in facial expressions. \n","4. Linear Discriminant Analysis: LDA seeks to identify linear combinations of features that best separate emotion classes.\n","5. Generalised linear model: GLMs can help prevent overfitting in high-dimensional spaces by applying regularisation to linear models. By performing feature selection, it allows us to obtain the most important features in the data set.\n","6. Support Vector Machines: SVMs can model complex & non-linear relationships between image features and emotional categories. It can be useful as the boundaries between emotions are likely to not be linearly separable."]},{"cell_type":"code","execution_count":20,"id":"76b4df43","metadata":{"execution":{"iopub.execute_input":"2025-11-12T14:32:23.289965Z","iopub.status.busy":"2025-11-12T14:32:23.288292Z","iopub.status.idle":"2025-11-12T16:01:22.020274Z","shell.execute_reply":"2025-11-12T16:01:22.017354Z"},"papermill":{"duration":5338.786902,"end_time":"2025-11-12T16:01:22.060823","exception":false,"start_time":"2025-11-12T14:32:23.273921","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["Warning message:\n","“Setting row names on a tibble is deprecated.”\n"]},{"name":"stdout","output_type":"stream","text":["Growing trees.. Progress: 46%. Estimated remaining time: 36 seconds.\n","Growing trees.. Progress: 92%. Estimated remaining time: 5 seconds.\n","\n","Execution time: 55.2648 \n"]},{"data":{"text/plain":["$model\n","Random Forest \n","\n","2538 samples\n","2518 predictors\n","   4 classes: 'anger', 'disgust', 'happy', 'sad' \n","\n","No pre-processing\n","Resampling: Cross-Validated (5 fold) \n","Summary of sample sizes: 2032, 2030, 2030, 2030, 2030 \n","Resampling results across tuning parameters:\n","\n","  mtry  splitrule   Accuracy   Kappa    \n","     2  gini        0.8711571  0.8203237\n","     2  extratrees  0.8455324  0.7837049\n","    11  gini        0.9192166  0.8879023\n","    11  extratrees  0.9010955  0.8625952\n","    70  gini        0.9404952  0.9175539\n","    70  extratrees  0.9274984  0.8995291\n","   422  gini        0.9479988  0.9280761\n","   422  extratrees  0.9456226  0.9247399\n","  2518  gini        0.9180542  0.8864704\n","  2518  extratrees  0.9479941  0.9280559\n","\n","Tuning parameter 'min.node.size' was held constant at a value of 1\n","Accuracy was used to select the optimal model using the largest value.\n","The final values used for the model were mtry = 422, splitrule = gini\n"," and min.node.size = 1.\n","\n","$confusion\n","Confusion Matrix and Statistics\n","\n","          Reference\n","Prediction anger disgust happy sad\n","   anger     570       0     0   0\n","   disgust     0     744     0   0\n","   happy       0       0   870   0\n","   sad         0       0     0 354\n","\n","Overall Statistics\n","                                     \n","               Accuracy : 1          \n","                 95% CI : (0.9985, 1)\n","    No Information Rate : 0.3428     \n","    P-Value [Acc > NIR] : < 2.2e-16  \n","                                     \n","                  Kappa : 1          \n","                                     \n"," Mcnemar's Test P-Value : NA         \n","\n","Statistics by Class:\n","\n","                     Class: anger Class: disgust Class: happy Class: sad\n","Sensitivity                1.0000         1.0000       1.0000     1.0000\n","Specificity                1.0000         1.0000       1.0000     1.0000\n","Pos Pred Value             1.0000         1.0000       1.0000     1.0000\n","Neg Pred Value             1.0000         1.0000       1.0000     1.0000\n","Prevalence                 0.2246         0.2931       0.3428     0.1395\n","Detection Rate             0.2246         0.2931       0.3428     0.1395\n","Detection Prevalence       0.2246         0.2931       0.3428     0.1395\n","Balanced Accuracy          1.0000         1.0000       1.0000     1.0000\n","\n","$accuracy\n","Accuracy \n","       1 \n"]},"metadata":{},"output_type":"display_data"},{"name":"stderr","output_type":"stream","text":["Warning message:\n","“Setting row names on a tibble is deprecated.”\n"]},{"name":"stdout","output_type":"stream","text":["\n","Execution time: 56.15029 \n"]},{"data":{"text/plain":["$model\n","CART \n","\n","2538 samples\n","2518 predictors\n","   4 classes: 'anger', 'disgust', 'happy', 'sad' \n","\n","No pre-processing\n","Resampling: Cross-Validated (5 fold) \n","Summary of sample sizes: 2031, 2030, 2030, 2031, 2030 \n","Resampling results across tuning parameters:\n","\n","  cp          Accuracy   Kappa    \n","  0.03297362  0.6091304  0.4537665\n","  0.04346523  0.5898251  0.4269170\n","  0.05455635  0.5788015  0.4043242\n","  0.10251799  0.5145607  0.3088143\n","  0.19304556  0.4420941  0.1863924\n","\n","Accuracy was used to select the optimal model using the largest value.\n","The final value used for the model was cp = 0.03297362.\n","\n","$confusion\n","Confusion Matrix and Statistics\n","\n","          Reference\n","Prediction anger disgust happy sad\n","   anger     427     160    92 234\n","   disgust   113     529   135 102\n","   happy      30      55   643  18\n","   sad         0       0     0   0\n","\n","Overall Statistics\n","                                          \n","               Accuracy : 0.63            \n","                 95% CI : (0.6109, 0.6488)\n","    No Information Rate : 0.3428          \n","    P-Value [Acc > NIR] : < 2.2e-16       \n","                                          \n","                  Kappa : 0.4839          \n","                                          \n"," Mcnemar's Test P-Value : < 2.2e-16       \n","\n","Statistics by Class:\n","\n","                     Class: anger Class: disgust Class: happy Class: sad\n","Sensitivity                0.7491         0.7110       0.7391     0.0000\n","Specificity                0.7530         0.8049       0.9382     1.0000\n","Pos Pred Value             0.4677         0.6018       0.8619        NaN\n","Neg Pred Value             0.9120         0.8704       0.8733     0.8605\n","Prevalence                 0.2246         0.2931       0.3428     0.1395\n","Detection Rate             0.1682         0.2084       0.2533     0.0000\n","Detection Prevalence       0.3597         0.3463       0.2939     0.0000\n","Balanced Accuracy          0.7511         0.7580       0.8387     0.5000\n","\n","$accuracy\n"," Accuracy \n","0.6300236 \n"]},"metadata":{},"output_type":"display_data"},{"name":"stderr","output_type":"stream","text":["Warning message:\n","“Setting row names on a tibble is deprecated.”\n"]},{"name":"stdout","output_type":"stream","text":["\n","Execution time: 15.06145 \n"]},{"data":{"text/plain":["$model\n","k-Nearest Neighbors \n","\n","2538 samples\n","2518 predictors\n","   4 classes: 'anger', 'disgust', 'happy', 'sad' \n","\n","Pre-processing: centered (2518), scaled (2518) \n","Resampling: Cross-Validated (5 fold) \n","Summary of sample sizes: 2030, 2032, 2030, 2030, 2030 \n","Resampling results across tuning parameters:\n","\n","  k   Accuracy   Kappa    \n","   5  0.7344340  0.6336232\n","   7  0.7371931  0.6373201\n","   9  0.7419252  0.6436451\n","  11  0.7446952  0.6473085\n","  13  0.7462809  0.6491715\n","\n","Accuracy was used to select the optimal model using the largest value.\n","The final value used for the model was k = 13.\n","\n","$confusion\n","Confusion Matrix and Statistics\n","\n","          Reference\n","Prediction anger disgust happy sad\n","   anger     482      61    26  60\n","   disgust    41     631    54  58\n","   happy      18      41   777   6\n","   sad        29      11    13 230\n","\n","Overall Statistics\n","                                          \n","               Accuracy : 0.8353          \n","                 95% CI : (0.8203, 0.8495)\n","    No Information Rate : 0.3428          \n","    P-Value [Acc > NIR] : < 2.2e-16       \n","                                          \n","                  Kappa : 0.7727          \n","                                          \n"," Mcnemar's Test P-Value : 1.448e-09       \n","\n","Statistics by Class:\n","\n","                     Class: anger Class: disgust Class: happy Class: sad\n","Sensitivity                0.8456         0.8481       0.8931    0.64972\n","Specificity                0.9253         0.9147       0.9610    0.97573\n","Pos Pred Value             0.7663         0.8048       0.9228    0.81272\n","Neg Pred Value             0.9539         0.9356       0.9452    0.94501\n","Prevalence                 0.2246         0.2931       0.3428    0.13948\n","Detection Rate             0.1899         0.2486       0.3061    0.09062\n","Detection Prevalence       0.2478         0.3089       0.3318    0.11151\n","Balanced Accuracy          0.8855         0.8814       0.9271    0.81273\n","\n","$accuracy\n"," Accuracy \n","0.8353034 \n"]},"metadata":{},"output_type":"display_data"},{"name":"stderr","output_type":"stream","text":["Warning message:\n","“Setting row names on a tibble is deprecated.”\n"]},{"name":"stderr","output_type":"stream","text":["Warning message in lda.default(x, grouping, ...):\n","“variables are collinear”\n"]},{"name":"stdout","output_type":"stream","text":["\n","Execution time: 2.092451 \n"]},{"data":{"text/plain":["$model\n","Linear Discriminant Analysis \n","\n","2538 samples\n","2518 predictors\n","   4 classes: 'anger', 'disgust', 'happy', 'sad' \n","\n","Pre-processing: centered (2518), scaled (2518) \n","Resampling: Cross-Validated (5 fold) \n","Summary of sample sizes: 2031, 2030, 2030, 2030, 2031 \n","Resampling results:\n","\n","  Accuracy   Kappa    \n","  0.8329404  0.7710818\n","\n","\n","$confusion\n","Confusion Matrix and Statistics\n","\n","          Reference\n","Prediction anger disgust happy sad\n","   anger     570       0     0   0\n","   disgust     0     744     0   0\n","   happy       0       0   870   0\n","   sad         0       0     0 354\n","\n","Overall Statistics\n","                                     \n","               Accuracy : 1          \n","                 95% CI : (0.9985, 1)\n","    No Information Rate : 0.3428     \n","    P-Value [Acc > NIR] : < 2.2e-16  \n","                                     \n","                  Kappa : 1          \n","                                     \n"," Mcnemar's Test P-Value : NA         \n","\n","Statistics by Class:\n","\n","                     Class: anger Class: disgust Class: happy Class: sad\n","Sensitivity                1.0000         1.0000       1.0000     1.0000\n","Specificity                1.0000         1.0000       1.0000     1.0000\n","Pos Pred Value             1.0000         1.0000       1.0000     1.0000\n","Neg Pred Value             1.0000         1.0000       1.0000     1.0000\n","Prevalence                 0.2246         0.2931       0.3428     0.1395\n","Detection Rate             0.2246         0.2931       0.3428     0.1395\n","Detection Prevalence       0.2246         0.2931       0.3428     0.1395\n","Balanced Accuracy          1.0000         1.0000       1.0000     1.0000\n","\n","$accuracy\n","Accuracy \n","       1 \n"]},"metadata":{},"output_type":"display_data"},{"name":"stderr","output_type":"stream","text":["Warning message:\n","“Setting row names on a tibble is deprecated.”\n"]},{"name":"stdout","output_type":"stream","text":["\n","Execution time: 1.423166 \n"]},{"data":{"text/plain":["$model\n","glmnet \n","\n","2538 samples\n","2518 predictors\n","   4 classes: 'anger', 'disgust', 'happy', 'sad' \n","\n","No pre-processing\n","Resampling: Cross-Validated (5 fold) \n","Summary of sample sizes: 2030, 2030, 2031, 2031, 2030 \n","Resampling results across tuning parameters:\n","\n","  alpha  lambda        Accuracy   Kappa    \n","  0.100  0.0002732383  0.9803002  0.9728800\n","  0.100  0.0012682600  0.9803002  0.9728800\n","  0.100  0.0058867416  0.9803002  0.9728800\n","  0.100  0.0273238342  0.9803002  0.9728800\n","  0.100  0.1268260039  0.9428699  0.9210516\n","  0.325  0.0002732383  0.9787231  0.9707283\n","  0.325  0.0012682600  0.9787231  0.9707283\n","  0.325  0.0058867416  0.9787231  0.9707283\n","  0.325  0.0273238342  0.9625689  0.9484042\n","  0.325  0.1268260039  0.8530347  0.7945001\n","  0.550  0.0002732383  0.9783294  0.9701881\n","  0.550  0.0012682600  0.9783294  0.9701881\n","  0.550  0.0058867416  0.9767522  0.9680267\n","  0.550  0.0273238342  0.9408944  0.9184643\n","  0.550  0.1268260039  0.7576752  0.6568353\n","  0.775  0.0002732383  0.9751751  0.9658510\n","  0.775  0.0012682600  0.9751751  0.9658510\n","  0.775  0.0058867416  0.9747814  0.9652995\n","  0.775  0.0273238342  0.9208009  0.8905574\n","  0.775  0.1268260039  0.6591809  0.5100457\n","  1.000  0.0002732383  0.9739932  0.9642127\n","  1.000  0.0012682600  0.9739932  0.9642127\n","  1.000  0.0058867416  0.9665067  0.9538876\n","  1.000  0.0273238342  0.8947988  0.8541066\n","  1.000  0.1268260039  0.5752551  0.3819549\n","\n","Accuracy was used to select the optimal model using the largest value.\n","The final values used for the model were alpha = 0.1 and lambda = 0.02732383.\n","\n","$confusion\n","Confusion Matrix and Statistics\n","\n","          Reference\n","Prediction anger disgust happy sad\n","   anger     567       0     0   4\n","   disgust     0     744     0   0\n","   happy       0       0   870   0\n","   sad         3       0     0 350\n","\n","Overall Statistics\n","                                          \n","               Accuracy : 0.9972          \n","                 95% CI : (0.9943, 0.9989)\n","    No Information Rate : 0.3428          \n","    P-Value [Acc > NIR] : < 2.2e-16       \n","                                          \n","                  Kappa : 0.9962          \n","                                          \n"," Mcnemar's Test P-Value : NA              \n","\n","Statistics by Class:\n","\n","                     Class: anger Class: disgust Class: happy Class: sad\n","Sensitivity                0.9947         1.0000       1.0000     0.9887\n","Specificity                0.9980         1.0000       1.0000     0.9986\n","Pos Pred Value             0.9930         1.0000       1.0000     0.9915\n","Neg Pred Value             0.9985         1.0000       1.0000     0.9982\n","Prevalence                 0.2246         0.2931       0.3428     0.1395\n","Detection Rate             0.2234         0.2931       0.3428     0.1379\n","Detection Prevalence       0.2250         0.2931       0.3428     0.1391\n","Balanced Accuracy          0.9964         1.0000       1.0000     0.9937\n","\n","$accuracy\n"," Accuracy \n","0.9972419 \n"]},"metadata":{},"output_type":"display_data"},{"name":"stderr","output_type":"stream","text":["Warning message:\n","“Setting row names on a tibble is deprecated.”\n"]},{"name":"stdout","output_type":"stream","text":["\n","Execution time: 6.507682 \n"]},{"data":{"text/plain":["$model\n","Support Vector Machines with Radial Basis Function Kernel \n","\n","2538 samples\n","2518 predictors\n","   4 classes: 'anger', 'disgust', 'happy', 'sad' \n","\n","Pre-processing: centered (2518), scaled (2518) \n","Resampling: Cross-Validated (5 fold) \n","Summary of sample sizes: 2030, 2031, 2031, 2030, 2030 \n","Resampling results across tuning parameters:\n","\n","  C     Accuracy   Kappa    \n","  0.25  0.8396225  0.7754361\n","  0.50  0.9097563  0.8747715\n","  1.00  0.9479802  0.9281508\n","  2.00  0.9763539  0.9674070\n","  4.00  0.9869954  0.9820990\n","\n","Tuning parameter 'sigma' was held constant at a value of 0.0002417788\n","Accuracy was used to select the optimal model using the largest value.\n","The final values used for the model were sigma = 0.0002417788 and C = 4.\n","\n","$confusion\n","Confusion Matrix and Statistics\n","\n","          Reference\n","Prediction anger disgust happy sad\n","   anger     570       0     0   2\n","   disgust     0     744     0   0\n","   happy       0       0   870   0\n","   sad         0       0     0 352\n","\n","Overall Statistics\n","                                          \n","               Accuracy : 0.9992          \n","                 95% CI : (0.9972, 0.9999)\n","    No Information Rate : 0.3428          \n","    P-Value [Acc > NIR] : < 2.2e-16       \n","                                          \n","                  Kappa : 0.9989          \n","                                          \n"," Mcnemar's Test P-Value : NA              \n","\n","Statistics by Class:\n","\n","                     Class: anger Class: disgust Class: happy Class: sad\n","Sensitivity                1.0000         1.0000       1.0000     0.9944\n","Specificity                0.9990         1.0000       1.0000     1.0000\n","Pos Pred Value             0.9965         1.0000       1.0000     1.0000\n","Neg Pred Value             1.0000         1.0000       1.0000     0.9991\n","Prevalence                 0.2246         0.2931       0.3428     0.1395\n","Detection Rate             0.2246         0.2931       0.3428     0.1387\n","Detection Prevalence       0.2254         0.2931       0.3428     0.1387\n","Balanced Accuracy          0.9995         1.0000       1.0000     0.9972\n","\n","$accuracy\n","Accuracy \n","0.999212 \n"]},"metadata":{},"output_type":"display_data"}],"source":["fit_rf <- fit_model(features, y = y, method = \"ranger\")\n","fit_rf\n","\n","fit_tree <- fit_model(features, y = y, method = \"rpart\")\n","fit_tree\n","\n","fit_knn <- fit_model(features, y = y, method = \"knn\")\n","fit_knn\n","\n","fit_lda <- fit_model(features, y = y, method = \"lda\")\n","fit_lda\n","\n","fit_glm <- fit_model(features, y = y, method = \"glmnet\")\n","fit_glm\n","\n","fit_svm <- fit_model(features, y = y, method = \"svmRadial\")\n","fit_svm"]},{"cell_type":"markdown","id":"7c75f6fa","metadata":{"papermill":{"duration":0.01588,"end_time":"2025-11-12T16:01:22.114057","exception":false,"start_time":"2025-11-12T16:01:22.098177","status":"completed"},"tags":[]},"source":["# 4.2 Model evaluation\n","In this section, we evaluate the models previously fitted to the training data. Our goal is to maximize test data accuracy, so we take the training accuracy as well as the flexiblility of the learning method into account."]},{"cell_type":"code","execution_count":21,"id":"e12518d9","metadata":{"execution":{"iopub.execute_input":"2025-11-12T16:01:22.68936Z","iopub.status.busy":"2025-11-12T16:01:22.686977Z","iopub.status.idle":"2025-11-12T16:01:23.413541Z","shell.execute_reply":"2025-11-12T16:01:23.411714Z"},"papermill":{"duration":1.282049,"end_time":"2025-11-12T16:01:23.415995","exception":false,"start_time":"2025-11-12T16:01:22.133946","status":"completed"},"tags":[]},"outputs":[{"data":{"image/png":"iVBORw0KGgoAAAANSUhEUgAAA0gAAANICAIAAAByhViMAAAABmJLR0QA/wD/AP+gvaeTAAAg\nAElEQVR4nOzdd2AT5R/H8W+S7kkXlLbsvWVvEBQUxIIIiIKyUYYosmQpqCAb/bkVQWQIqIgC\ngspQ2Vv2KqNAKbSllO6V3O+PpCVt07RJy/B8v/5KnzzP3XOXu+TTG89pFEURAAAA/PtpH3QH\nAAAAUDwIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAA\nQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUI\ndgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAA\nACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpB\nsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMA\nAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJ\ngh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0A\nAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBK\nEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwA\nAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABU\ngmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAH\nAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACg\nEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7\nAAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAA\nlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDY\nAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAA\nqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATB\nDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAA\nQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUI\ndgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAA\nACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpB\nsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMA\nAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJ\ngh0AAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0A\nAIBKEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBK\nEOwAAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwA\nAABUgmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABU\ngmAHAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAH\nAACgEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACg\nEgQ7AAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7\nAAAAlSDYAQAAqATBDgAAQCUIdgAAACpBsAMAAFAJgh0AAIBKEOwAAABUgmAHAACgEgQ7AAAA\n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\nxqW8i4OIOJj99+bi26mll7M+PWrJhfjoA0v1iuJbe7BbQcftPcq+WNpJd+ufr1MV5dqvP4nV\n87AAoDJNK7mKyPnTd3KVx8RcExF312Avq1+isbcTDsXEn00z5CqPiAgXEW/PCsbmxVvNJrYF\nuwBHnYgcPxRrpU7skSMionNmCHvABq0eDRSRPXOXxFu6ISv11q5tcWkajWPXUu7m5c91KyMi\nBxYf2bHigoi0GFC7wBlpNC6D6/np0yOWXUn86ddrjEsM4D+lWvVyGpHomNNHc56N/XRPnIjU\nrl3GevNzp481+nnPo79HmBcqhow39sSJyBNNgu9FNZvYFuxeKO0uIgfHvJ2aO1xmdyf9ndH7\nRcS9dG87egP8Z1XoPb6ah1PyzW3Dxsz56+iFlKx4p2Qkndm/aerrC/WKEvTYmKquOQ7LB3d6\nSaPRxJ1ZtCoySedc5sWyHoWZV/X+LUTk7/8t/uuOtfthAUB93FyD5pdy1hsyOv127oop2xnW\nHTn8/p0MRwf3VTVzfIt+9k/Y1ENh88PuPrCnXoPKbhrNjahTfY7fTFBERJKSE8Zt2fNLqt6n\nRMjycq73oppNbLvGru+Mdm/3/inx2vIGfWpu/3ZCqZzj6RkyoucPbP/NlQQRaTfjBTt6A/xn\n6ZyC3/148vTxs05e3DV/6i6NzsnDw91B9PHxCXpFEZEyTXrNGdE8VytH90e6B7j+GBVvEAls\nNNhJU6iI5hHSN8R5/bXzW4XzsAD+e0Y+2XD99/u237hcaXlkHV+XhMTEsBS9Vus488km5XLe\nrLDo2KXDGYayIT5jKpsuQnN1KfVn08BmeyNX7v9n1UFdoIsuKjk9U8Tb239raM3sUFW81Wxi\nW6uKvVYNeq/01ydiT6+aVGHbipcGPN+mSd2SJdxS4qJOHNzx3eKlx28mi4hvrYGrejKQKWAb\nF9/6M7/8Zu+mX3YeOHT2cuSd+DupOmfvUmUrVanZst0T7RtZ3qee6Ff1x7n/iEi7ftUKOSON\nxmlQff/pe29qdZ6chwXwX+Po4PlHr1YLDoV9eynm7K14Z2fnjpWCRzeo8qRXoUJR41p1z5bw\nnXri+sHYxCvpSgVfn26VQibWDvLR3sNqhaex9cFfmcmnB7Rvv3zfjfwqlG7Wd+vWJTXy3NkH\n4F9ty5YtHTp0EJGI5x8NcmOUSgB4cBZtzu8dmwOhg1uNZXsu//zF9HZ1yunMzvtotE5VGj4x\n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\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMAmBA7AIAJsQMA\nmBA7AIAJsQMAmBA7AIAJsQMAmBA7AICJAAMy49CElOfdAAAAAElFTkSuQmCC"},"metadata":{"image/png":{"height":420,"width":420}},"output_type":"display_data"}],"source":["# Create data frame for the model evaluation plot\n","df_plot <- data.frame(\n","    model = c(\"CART\",\n","              \"Random Forest\", \n","              \"Multinomial logistic regression\",\n","              \"LDA\",\n","              \"KNN\",\n","              \"SVM\"\n","             ),\n","    accuracy = c(fit_tree$accuracy, \n","                 fit_rf$accuracy, \n","                 fit_glm$accuracy,\n","                 fit_knn$accuracy,\n","                 fit_lda$accuracy,\n","                 fit_svm$accuracy\n","                )\n",")\n","\n","# Plot model evaluation\n","df_plot %>% \n","    ggplot(aes(x = fct_reorder(model, accuracy), y = accuracy, fill = model)) +\n","    geom_bar(stat = \"identity\",) +\n","    geom_text(aes(label = round(accuracy, 3)), \n","              vjust = 0.5, \n","              hjust = 1.1,\n","              size = 5) + \n","    scale_y_continuous(expand = c(0, 0), limits = c(0, 1)) +\n","    scale_fill_manual(values = c(rep(\"grey80\", times = nrow(df_plot)-1), \"tomato\")) +\n","    theme_classic() +\n","    theme(\n","        text = element_text(size = 17),\n","        axis.text.x = element_text(), \n","        legend.position = \"none\",\n","        aspect.ratio = 1/3\n","    ) +\n","    coord_flip() +\n","    xlab(\"Model\") +\n","    ylab(\"Classification Accuracy\") +\n","    ggtitle(\"Model Accuracy with Correlation Variable Selection\")"]},{"cell_type":"markdown","id":"f43944a5","metadata":{"papermill":{"duration":0.016047,"end_time":"2025-11-12T16:01:23.447664","exception":false,"start_time":"2025-11-12T16:01:23.431617","status":"completed"},"tags":[]},"source":["### Conclusion on Model Choice\n","CART and Random Forest achieved unusually high accuracies, which could be a sign of overfitting. Therefore, we select the SVM model for our final submission, as it offers a balanced trade-off between flexibility and accuracy. "]},{"cell_type":"markdown","id":"cafcc6ed","metadata":{"_cell_guid":"28a36d18-e9cf-4c3f-8b5d-9e23f4d884bf","_uuid":"7901f9d0-3ba7-4996-8271-693c1a8ca23c","papermill":{"duration":0.015955,"end_time":"2025-11-12T16:01:23.479411","exception":false,"start_time":"2025-11-12T16:01:23.463456","status":"completed"},"tags":[]},"source":["# Formatting submission file\n","\n","We will now format our submission file for final predictions."]},{"cell_type":"code","execution_count":22,"id":"0954d874","metadata":{"execution":{"iopub.execute_input":"2025-11-12T16:01:23.51818Z","iopub.status.busy":"2025-11-12T16:01:23.516488Z","iopub.status.idle":"2025-11-12T16:01:23.539726Z","shell.execute_reply":"2025-11-12T16:01:23.537919Z"},"papermill":{"duration":0.04732,"end_time":"2025-11-12T16:01:23.542276","exception":false,"start_time":"2025-11-12T16:01:23.494956","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":[],"text/latex":[],"text/markdown":[],"text/plain":["character(0)"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":[],"text/latex":[],"text/markdown":[],"text/plain":["character(0)"]},"metadata":{},"output_type":"display_data"}],"source":["setdiff(colnames(features), colnames(features_test))\n","setdiff(colnames(features_test), colnames(features))\n"]},{"cell_type":"code","execution_count":23,"id":"d1bd2afc","metadata":{"_cell_guid":"60326eec-bdfd-458a-84c6-62a753dc4ccd","_uuid":"b7d4f31a-b3bf-4536-80cb-c491dc0a10ab","collapsed":false,"execution":{"iopub.execute_input":"2025-11-12T16:01:23.577269Z","iopub.status.busy":"2025-11-12T16:01:23.575619Z","iopub.status.idle":"2025-11-12T16:01:26.250688Z","shell.execute_reply":"2025-11-12T16:01:26.248541Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":2.695638,"end_time":"2025-11-12T16:01:26.253521","exception":false,"start_time":"2025-11-12T16:01:23.557883","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["file,category\n","S010_004_00000017a.png,anger\n","S010_004_00000017b.png,anger\n","S010_004_00000017c.png,sad\n","S010_004_00000017d.png,anger\n","S010_004_00000017e.png,sad\n","S010_004_00000017f.png,anger\n","S011_002_00000022a.png,sad\n","S011_002_00000022b.png,sad\n","S011_002_00000022c.png,sad\n","S011_002_00000022d.png,sad\n","S011_002_00000022e.png,sad\n","S011_002_00000022f.png,sad\n","S011_005_00000018a.png,disgust\n","S011_005_00000018b.png,disgust\n","S011_005_00000018c.png,disgust\n","S011_005_00000018d.png,disgust\n","S011_005_00000018e.png,disgust\n","S011_005_00000018f.png,disgust\n","S011_006_00000013a.png,happy\n"]}],"source":["## Make predictions\n","pred_rf = predict(fit_svm$model, features_test, type='raw')\n","\n","## Write to file\n","tibble(file = rownames(X_test), category = pred_rf) %>% \n","    write_csv(file = \"submission.csv\")\n","\n","## Check result\n","cat(readLines(\"submission.csv\",n=20), sep=\"\\n\")"]},{"cell_type":"markdown","id":"fa9584ac","metadata":{"papermill":{"duration":0.01628,"end_time":"2025-11-12T16:01:26.286121","exception":false,"start_time":"2025-11-12T16:01:26.269841","status":"completed"},"tags":[]},"source":["# References\n","Lucey, P., Cohn, J. F., Kanade, T., Saragih, J., Ambadar, Z., & Matthews, I. (2010). The Extended Cohn-Kanade Dataset (CK+): A complete dataset for action unit and emotion-specified expression. _IEEE Computer Society Conference on Computer Vision and Pattern Recognition - Workshops_, 94-101. doi: 10.1109/CVPRW.2010.5543262\n","\n","Mollahosseini, A., Hasani, B., & Mahoor, M. H. (2017). AffectNet: A database for facial expression, valence, and arousal computing in the wild. _IEEE Transactions on Affective Computing_, 1-18. https://doi.org/10.48550/arXiv.1708.03985\n","\n","Muruggapan, M. & Mutawa, A. Facial geometric feature extraction based emotional expression classification using machine learning algorithms. _PLoS ONE_, 16(2). https://doi.org/10.1371/journal.pone.0247131"]},{"cell_type":"markdown","id":"2ec08bfa","metadata":{"papermill":{"duration":0.017206,"end_time":"2025-11-12T16:01:26.319719","exception":false,"start_time":"2025-11-12T16:01:26.302513","status":"completed"},"tags":[]},"source":["# Division of Labor \n","\n","> Jette: HOG features, raw pixel analysis, model fitting, markdown\n"," \n","> Jakub: Bag of (deep) features, spectral features, model fitting, markdown\n","\n","> Xin Yun: Edge features, notebook formatting, model fitting function, model fitting, markdown"]}],"metadata":{"kaggle":{"accelerator":"none","dataSources":[{"databundleVersionId":14024704,"sourceId":117327,"sourceType":"competition"}],"dockerImageVersionId":30749,"isGpuEnabled":false,"isInternetEnabled":true,"language":"r","sourceType":"notebook"},"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"codemirror_mode":"r","file_extension":".r","mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"4.4.0"},"papermill":{"default_parameters":{},"duration":5626.715001,"end_time":"2025-11-12T16:01:26.96646","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2025-11-12T14:27:40.251459","version":"2.6.0"}},"nbformat":4,"nbformat_minor":5}